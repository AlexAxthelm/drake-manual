<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>The drake R Package User Manual</title>
  <meta name="description" content="The drake R Package User Manual">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="The drake R Package User Manual" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The drake R Package User Manual" />
  
  
  

<meta name="author" content="Will Landau, Kirill Müller, Alex Axthelm, Jasper Clarkberg, Lorenz Walthert">
<meta name="author" content="Copyright Eli Lilly and Company">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="organize.html">
<link rel="next" href="debug.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/vis-4.20.1/vis.css" rel="stylesheet" />
<script src="libs/vis-4.20.1/vis.min.js"></script>
<script src="libs/visNetwork-binding-2.0.4/visNetwork.js"></script>
<script src="libs/d3-4.5.0/d3.min.js"></script>
<script src="libs/sankey-1/sankey.js"></script>
<script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#the-drake-r-package"><i class="fa fa-check"></i><b>1.1</b> The drake R package</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#why-drake"><i class="fa fa-check"></i><b>1.3</b> Why drake?</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#what-gets-done-stays-done."><i class="fa fa-check"></i><b>1.3.1</b> What gets done stays done.</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#reproducibility-with-confidence"><i class="fa fa-check"></i><b>1.3.2</b> Reproducibility with confidence</a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#aggressively-scale-up."><i class="fa fa-check"></i><b>1.3.3</b> Aggressively scale up.</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#documentation"><i class="fa fa-check"></i><b>1.4</b> Documentation</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#cheat-sheet"><i class="fa fa-check"></i><b>1.4.1</b> Cheat sheet</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#frequently-asked-questions"><i class="fa fa-check"></i><b>1.4.2</b> Frequently asked questions</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#function-reference"><i class="fa fa-check"></i><b>1.4.3</b> Function reference</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#tutorials"><i class="fa fa-check"></i><b>1.4.4</b> Tutorials</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#examples"><i class="fa fa-check"></i><b>1.4.5</b> Examples</a></li>
<li class="chapter" data-level="1.4.6" data-path="index.html"><a href="index.html#presentations"><i class="fa fa-check"></i><b>1.4.6</b> Presentations</a></li>
<li class="chapter" data-level="1.4.7" data-path="index.html"><a href="index.html#real-example-projects"><i class="fa fa-check"></i><b>1.4.7</b> Real example projects</a></li>
<li class="chapter" data-level="1.4.8" data-path="index.html"><a href="index.html#context-and-history"><i class="fa fa-check"></i><b>1.4.8</b> Context and history</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#help-and-troubleshooting"><i class="fa fa-check"></i><b>1.5</b> Help and troubleshooting</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#similar-work"><i class="fa fa-check"></i><b>1.6</b> Similar work</a><ul>
<li class="chapter" data-level="1.6.1" data-path="index.html"><a href="index.html#gnu-make"><i class="fa fa-check"></i><b>1.6.1</b> GNU Make</a></li>
<li class="chapter" data-level="1.6.2" data-path="index.html"><a href="index.html#remake"><i class="fa fa-check"></i><b>1.6.2</b> Remake</a></li>
<li class="chapter" data-level="1.6.3" data-path="index.html"><a href="index.html#memoise"><i class="fa fa-check"></i><b>1.6.3</b> Memoise</a></li>
<li class="chapter" data-level="1.6.4" data-path="index.html"><a href="index.html#knitr-and-r-markdown"><i class="fa fa-check"></i><b>1.6.4</b> Knitr and R Markdown</a></li>
<li class="chapter" data-level="1.6.5" data-path="index.html"><a href="index.html#factuals-drake"><i class="fa fa-check"></i><b>1.6.5</b> Factual’s Drake</a></li>
<li class="chapter" data-level="1.6.6" data-path="index.html"><a href="index.html#other-pipeline-toolkits"><i class="fa fa-check"></i><b>1.6.6</b> Other pipeline toolkits</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.7</b> Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>I Examples</b></span></li>
<li class="chapter" data-level="2" data-path="main.html"><a href="main.html"><i class="fa fa-check"></i><b>2</b> The main example</a><ul>
<li class="chapter" data-level="2.1" data-path="main.html"><a href="main.html#set-the-stage."><i class="fa fa-check"></i><b>2.1</b> Set the stage.</a></li>
<li class="chapter" data-level="2.2" data-path="main.html"><a href="main.html#make-your-results."><i class="fa fa-check"></i><b>2.2</b> Make your results.</a></li>
<li class="chapter" data-level="2.3" data-path="main.html"><a href="main.html#go-back-and-fix-things."><i class="fa fa-check"></i><b>2.3</b> Go back and fix things.</a></li>
<li class="chapter" data-level="2.4" data-path="main.html"><a href="main.html#try-it-yourself"><i class="fa fa-check"></i><b>2.4</b> Try it yourself!</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>3</b> An analysis of R package download trends</a><ul>
<li class="chapter" data-level="3.1" data-path="packages.html"><a href="packages.html#get-the-code."><i class="fa fa-check"></i><b>3.1</b> Get the code.</a></li>
<li class="chapter" data-level="3.2" data-path="packages.html"><a href="packages.html#overview"><i class="fa fa-check"></i><b>3.2</b> Overview</a></li>
<li class="chapter" data-level="3.3" data-path="packages.html"><a href="packages.html#analysis"><i class="fa fa-check"></i><b>3.3</b> Analysis</a></li>
<li class="chapter" data-level="3.4" data-path="packages.html"><a href="packages.html#other-ways-to-trigger-downloads"><i class="fa fa-check"></i><b>3.4</b> Other ways to trigger downloads</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="gsp.html"><a href="gsp.html"><i class="fa fa-check"></i><b>4</b> Finding the best model of gross state product</a><ul>
<li class="chapter" data-level="4.1" data-path="gsp.html"><a href="gsp.html#get-the-code.-1"><i class="fa fa-check"></i><b>4.1</b> Get the code.</a></li>
<li class="chapter" data-level="4.2" data-path="gsp.html"><a href="gsp.html#objective-and-methods"><i class="fa fa-check"></i><b>4.2</b> Objective and methods</a></li>
<li class="chapter" data-level="4.3" data-path="gsp.html"><a href="gsp.html#data"><i class="fa fa-check"></i><b>4.3</b> Data</a></li>
<li class="chapter" data-level="4.4" data-path="gsp.html"><a href="gsp.html#analysis-1"><i class="fa fa-check"></i><b>4.4</b> Analysis</a></li>
<li class="chapter" data-level="4.5" data-path="gsp.html"><a href="gsp.html#results"><i class="fa fa-check"></i><b>4.5</b> Results</a></li>
<li class="chapter" data-level="4.6" data-path="gsp.html"><a href="gsp.html#comparison-with-gnu-make"><i class="fa fa-check"></i><b>4.6</b> Comparison with GNU Make</a></li>
<li class="chapter" data-level="4.7" data-path="gsp.html"><a href="gsp.html#references"><i class="fa fa-check"></i><b>4.7</b> References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="mtcars.html"><a href="mtcars.html"><i class="fa fa-check"></i><b>5</b> The mtcars example and workflow plan generation</a><ul>
<li class="chapter" data-level="5.1" data-path="mtcars.html"><a href="mtcars.html#get-the-code.-2"><i class="fa fa-check"></i><b>5.1</b> Get the code.</a></li>
<li class="chapter" data-level="5.2" data-path="mtcars.html"><a href="mtcars.html#quick-examples"><i class="fa fa-check"></i><b>5.2</b> Quick examples</a></li>
<li class="chapter" data-level="5.3" data-path="mtcars.html"><a href="mtcars.html#the-motivation-of-the-mtcars-example"><i class="fa fa-check"></i><b>5.3</b> The motivation of the mtcars example</a></li>
<li class="chapter" data-level="5.4" data-path="mtcars.html"><a href="mtcars.html#set-up-the-mtcars-example"><i class="fa fa-check"></i><b>5.4</b> Set up the mtcars example</a></li>
<li class="chapter" data-level="5.5" data-path="mtcars.html"><a href="mtcars.html#the-workflow-plan-data-frame"><i class="fa fa-check"></i><b>5.5</b> The workflow plan data frame</a></li>
<li class="chapter" data-level="5.6" data-path="mtcars.html"><a href="mtcars.html#generate-the-workflow-plan"><i class="fa fa-check"></i><b>5.6</b> Generate the workflow plan</a></li>
<li class="chapter" data-level="5.7" data-path="mtcars.html"><a href="mtcars.html#flexible-workflow-plan-generation"><i class="fa fa-check"></i><b>5.7</b> Flexible workflow plan generation</a></li>
<li class="chapter" data-level="5.8" data-path="mtcars.html"><a href="mtcars.html#run-the-workflow"><i class="fa fa-check"></i><b>5.8</b> Run the workflow</a></li>
<li class="chapter" data-level="5.9" data-path="mtcars.html"><a href="mtcars.html#automatic-watching-for-changed-dependencies"><i class="fa fa-check"></i><b>5.9</b> Automatic watching for changed dependencies</a></li>
<li class="chapter" data-level="5.10" data-path="mtcars.html"><a href="mtcars.html#a-note-on-tidy-evaluation"><i class="fa fa-check"></i><b>5.10</b> A note on tidy evaluation</a></li>
<li class="chapter" data-level="5.11" data-path="mtcars.html"><a href="mtcars.html#need-more-speed"><i class="fa fa-check"></i><b>5.11</b> Need more speed?</a></li>
</ul></li>
<li class="part"><span><b>II Functionality</b></span></li>
<li class="chapter" data-level="6" data-path="plans.html"><a href="plans.html"><i class="fa fa-check"></i><b>6</b> Workflow plan data frames</a><ul>
<li class="chapter" data-level="6.1" data-path="plans.html"><a href="plans.html#what-is-a-workflow-plan-data-frame"><i class="fa fa-check"></i><b>6.1</b> What is a workflow plan data frame?</a></li>
<li class="chapter" data-level="6.2" data-path="plans.html"><a href="plans.html#plans-are-like-r-scripts."><i class="fa fa-check"></i><b>6.2</b> Plans are like R scripts.</a></li>
<li class="chapter" data-level="6.3" data-path="plans.html"><a href="plans.html#so-why-do-we-use-plans"><i class="fa fa-check"></i><b>6.3</b> So why do we use plans?</a><ul>
<li class="chapter" data-level="6.3.1" data-path="plans.html"><a href="plans.html#you-can-skip-up-to-date-work."><i class="fa fa-check"></i><b>6.3.1</b> You can skip up-to-date work.</a></li>
<li class="chapter" data-level="6.3.2" data-path="plans.html"><a href="plans.html#data-frames-scale-well."><i class="fa fa-check"></i><b>6.3.2</b> Data frames scale well.</a></li>
<li class="chapter" data-level="6.3.3" data-path="plans.html"><a href="plans.html#you-do-not-need-to-worry-about-which-targets-run-first."><i class="fa fa-check"></i><b>6.3.3</b> You do not need to worry about which targets run first.</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="plans.html"><a href="plans.html#automatic-dependency-detection"><i class="fa fa-check"></i><b>6.4</b> Automatic dependency detection</a></li>
<li class="chapter" data-level="6.5" data-path="plans.html"><a href="plans.html#automatically-generating-workflow-plans"><i class="fa fa-check"></i><b>6.5</b> Automatically generating workflow plans</a><ul>
<li class="chapter" data-level="6.5.1" data-path="plans.html"><a href="plans.html#map_plan"><i class="fa fa-check"></i><b>6.5.1</b> <code>map_plan()</code></a></li>
<li class="chapter" data-level="6.5.2" data-path="plans.html"><a href="plans.html#wildcard-templating"><i class="fa fa-check"></i><b>6.5.2</b> Wildcard templating</a></li>
<li class="chapter" data-level="6.5.3" data-path="plans.html"><a href="plans.html#wildcard-clusters"><i class="fa fa-check"></i><b>6.5.3</b> Wildcard clusters</a></li>
<li class="chapter" data-level="6.5.4" data-path="plans.html"><a href="plans.html#specialized-wildcard-functionality"><i class="fa fa-check"></i><b>6.5.4</b> Specialized wildcard functionality</a></li>
<li class="chapter" data-level="6.5.5" data-path="plans.html"><a href="plans.html#non-wildcard-functions"><i class="fa fa-check"></i><b>6.5.5</b> Non-wildcard functions</a></li>
<li class="chapter" data-level="6.5.6" data-path="plans.html"><a href="plans.html#custom-metaprogramming"><i class="fa fa-check"></i><b>6.5.6</b> Custom metaprogramming</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="plans.html"><a href="plans.html#optional-columns-in-your-plan."><i class="fa fa-check"></i><b>6.6</b> Optional columns in your plan.</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="organize.html"><a href="organize.html"><i class="fa fa-check"></i><b>7</b> How to organize the files of drake projects</a><ul>
<li class="chapter" data-level="7.1" data-path="organize.html"><a href="organize.html#examples-1"><i class="fa fa-check"></i><b>7.1</b> Examples</a></li>
<li class="chapter" data-level="7.2" data-path="organize.html"><a href="organize.html#where-do-you-put-your-code"><i class="fa fa-check"></i><b>7.2</b> Where do you put your code?</a></li>
<li class="chapter" data-level="7.3" data-path="organize.html"><a href="organize.html#your-commands-are-code-chunks-not-r-scripts"><i class="fa fa-check"></i><b>7.3</b> Your commands are code chunks, not R scripts</a></li>
<li class="chapter" data-level="7.4" data-path="organize.html"><a href="organize.html#workflows-as-r-packages"><i class="fa fa-check"></i><b>7.4</b> Workflows as R packages</a><ul>
<li class="chapter" data-level="7.4.1" data-path="organize.html"><a href="organize.html#advantages-of-putting-workflows-in-r-packages"><i class="fa fa-check"></i><b>7.4.1</b> Advantages of putting workflows in R packages</a></li>
<li class="chapter" data-level="7.4.2" data-path="organize.html"><a href="organize.html#the-problem"><i class="fa fa-check"></i><b>7.4.2</b> The problem</a></li>
<li class="chapter" data-level="7.4.3" data-path="organize.html"><a href="organize.html#the-solution"><i class="fa fa-check"></i><b>7.4.3</b> The solution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="vis.html"><a href="vis.html"><i class="fa fa-check"></i><b>8</b> Visualization with drake</a><ul>
<li class="chapter" data-level="8.0.1" data-path="vis.html"><a href="vis.html#vis_drake_graph"><i class="fa fa-check"></i><b>8.0.1</b> <code>vis_drake_graph()</code></a></li>
<li class="chapter" data-level="8.0.2" data-path="vis.html"><a href="vis.html#sankey_drake_graph"><i class="fa fa-check"></i><b>8.0.2</b> <code>sankey_drake_graph()</code></a></li>
<li class="chapter" data-level="8.0.3" data-path="vis.html"><a href="vis.html#drake_ggraph"><i class="fa fa-check"></i><b>8.0.3</b> <code>drake_ggraph()</code></a></li>
<li class="chapter" data-level="8.1" data-path="vis.html"><a href="vis.html#underlying-graph-data-node-and-edge-data-frames"><i class="fa fa-check"></i><b>8.1</b> Underlying graph data: node and edge data frames</a></li>
<li class="chapter" data-level="8.2" data-path="vis.html"><a href="vis.html#visualizing-target-status"><i class="fa fa-check"></i><b>8.2</b> Visualizing target status</a></li>
<li class="chapter" data-level="8.3" data-path="vis.html"><a href="vis.html#subgraphs"><i class="fa fa-check"></i><b>8.3</b> Subgraphs</a></li>
<li class="chapter" data-level="8.4" data-path="vis.html"><a href="vis.html#control-the-vis_drake_graph-legend."><i class="fa fa-check"></i><b>8.4</b> Control the <code>vis_drake_graph()</code> legend.</a></li>
<li class="chapter" data-level="8.5" data-path="vis.html"><a href="vis.html#clusters"><i class="fa fa-check"></i><b>8.5</b> Clusters</a></li>
<li class="chapter" data-level="8.6" data-path="vis.html"><a href="vis.html#output-files"><i class="fa fa-check"></i><b>8.6</b> Output files</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="debug.html"><a href="debug.html"><i class="fa fa-check"></i><b>9</b> Debugging and testing drake projects</a><ul>
<li class="chapter" data-level="9.1" data-path="debug.html"><a href="debug.html#dependencies"><i class="fa fa-check"></i><b>9.1</b> Dependencies</a><ul>
<li class="chapter" data-level="9.1.1" data-path="debug.html"><a href="debug.html#visualize-your-dependency-graph."><i class="fa fa-check"></i><b>9.1.1</b> Visualize your dependency graph.</a></li>
<li class="chapter" data-level="9.1.2" data-path="debug.html"><a href="debug.html#check-specific-dependency-information."><i class="fa fa-check"></i><b>9.1.2</b> Check specific dependency information.</a></li>
<li class="chapter" data-level="9.1.3" data-path="debug.html"><a href="debug.html#outdated-targets-and-missing-dependencies"><i class="fa fa-check"></i><b>9.1.3</b> Outdated targets and missing dependencies</a></li>
<li class="chapter" data-level="9.1.4" data-path="debug.html"><a href="debug.html#but-why-are-my-targets-out-of-date"><i class="fa fa-check"></i><b>9.1.4</b> But <em>why</em> are my targets out of date?</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="debug.html"><a href="debug.html#diagnose-failures."><i class="fa fa-check"></i><b>9.2</b> Diagnose failures.</a></li>
<li class="chapter" data-level="9.3" data-path="debug.html"><a href="debug.html#timeouts-and-retries"><i class="fa fa-check"></i><b>9.3</b> Timeouts and retries</a></li>
<li class="chapter" data-level="9.4" data-path="debug.html"><a href="debug.html#more-help"><i class="fa fa-check"></i><b>9.4</b> More help</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="hpc.html"><a href="hpc.html"><i class="fa fa-check"></i><b>10</b> High-performance computing with drake</a><ul>
<li class="chapter" data-level="10.1" data-path="hpc.html"><a href="hpc.html#batch-mode-for-long-workflows"><i class="fa fa-check"></i><b>10.1</b> Batch mode for long workflows</a></li>
<li class="chapter" data-level="10.2" data-path="hpc.html"><a href="hpc.html#let-drake-schedule-your-targets."><i class="fa fa-check"></i><b>10.2</b> Let drake schedule your targets.</a></li>
<li class="chapter" data-level="10.3" data-path="hpc.html"><a href="hpc.html#parallel-backends"><i class="fa fa-check"></i><b>10.3</b> Parallel backends</a></li>
<li class="chapter" data-level="10.4" data-path="hpc.html"><a href="hpc.html#local-workers"><i class="fa fa-check"></i><b>10.4</b> Local workers</a></li>
<li class="chapter" data-level="10.5" data-path="hpc.html"><a href="hpc.html#remote-workers"><i class="fa fa-check"></i><b>10.5</b> Remote workers</a><ul>
<li class="chapter" data-level="10.5.1" data-path="hpc.html"><a href="hpc.html#clustermq-and-clustermq_staged"><i class="fa fa-check"></i><b>10.5.1</b> <code>&quot;clustermq&quot;</code> and <code>&quot;clustermq_staged&quot;</code></a></li>
<li class="chapter" data-level="10.5.2" data-path="hpc.html"><a href="hpc.html#future-future_lapply-and-future_lapply_staged"><i class="fa fa-check"></i><b>10.5.2</b> <code>&quot;future&quot;</code>, <code>&quot;future_lapply&quot;</code>, and <code>&quot;future_lapply_staged&quot;</code></a></li>
<li class="chapter" data-level="10.5.3" data-path="hpc.html"><a href="hpc.html#makefile"><i class="fa fa-check"></i><b>10.5.3</b> <code>&quot;Makefile&quot;</code></a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="hpc.html"><a href="hpc.html#scheduling-algorithms"><i class="fa fa-check"></i><b>10.6</b> Scheduling algorithms</a><ul>
<li class="chapter" data-level="10.6.1" data-path="hpc.html"><a href="hpc.html#persistent-scheduling"><i class="fa fa-check"></i><b>10.6.1</b> Persistent scheduling</a></li>
<li class="chapter" data-level="10.6.2" data-path="hpc.html"><a href="hpc.html#transient-scheduling"><i class="fa fa-check"></i><b>10.6.2</b> Transient scheduling</a></li>
<li class="chapter" data-level="10.6.3" data-path="hpc.html"><a href="hpc.html#staged-scheduling"><i class="fa fa-check"></i><b>10.6.3</b> Staged scheduling</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="hpc.html"><a href="hpc.html#final-thoughts"><i class="fa fa-check"></i><b>10.7</b> Final thoughts</a><ul>
<li class="chapter" data-level="10.7.1" data-path="hpc.html"><a href="hpc.html#debugging"><i class="fa fa-check"></i><b>10.7.1</b> Debugging</a></li>
<li class="chapter" data-level="10.7.2" data-path="hpc.html"><a href="hpc.html#drake-as-an-ordinary-job-scheduler"><i class="fa fa-check"></i><b>10.7.2</b> Drake as an ordinary job scheduler</a></li>
<li class="chapter" data-level="10.7.3" data-path="hpc.html"><a href="hpc.html#more-resources"><i class="fa fa-check"></i><b>10.7.3</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="hpc.html"><a href="hpc.html#footnotes"><i class="fa fa-check"></i><b>10.8</b> Footnotes</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="triggers.html"><a href="triggers.html"><i class="fa fa-check"></i><b>11</b> Triggers: decision rules for building targets</a><ul>
<li class="chapter" data-level="11.1" data-path="triggers.html"><a href="triggers.html#what-are-triggers"><i class="fa fa-check"></i><b>11.1</b> What are triggers?</a></li>
<li class="chapter" data-level="11.2" data-path="triggers.html"><a href="triggers.html#customization"><i class="fa fa-check"></i><b>11.2</b> Customization</a></li>
<li class="chapter" data-level="11.3" data-path="triggers.html"><a href="triggers.html#alternative-trigger-modes"><i class="fa fa-check"></i><b>11.3</b> Alternative trigger modes</a></li>
<li class="chapter" data-level="11.4" data-path="triggers.html"><a href="triggers.html#a-more-practical-example"><i class="fa fa-check"></i><b>11.4</b> A more practical example</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="time.html"><a href="time.html"><i class="fa fa-check"></i><b>12</b> Time: logging, prediction, and strategy</a><ul>
<li class="chapter" data-level="12.1" data-path="time.html"><a href="time.html#predict-total-runtime"><i class="fa fa-check"></i><b>12.1</b> Predict total runtime</a></li>
<li class="chapter" data-level="12.2" data-path="time.html"><a href="time.html#strategize-your-high-performance-computing"><i class="fa fa-check"></i><b>12.2</b> Strategize your high-performance computing</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="store.html"><a href="store.html"><i class="fa fa-check"></i><b>13</b> Storage</a><ul>
<li class="chapter" data-level="13.1" data-path="store.html"><a href="store.html#caches"><i class="fa fa-check"></i><b>13.1</b> Caches</a></li>
<li class="chapter" data-level="13.2" data-path="store.html"><a href="store.html#hash-algorithms"><i class="fa fa-check"></i><b>13.2</b> Hash algorithms</a></li>
<li class="chapter" data-level="13.3" data-path="store.html"><a href="store.html#which-hash-algorithm-should-you-choose"><i class="fa fa-check"></i><b>13.3</b> Which hash algorithm should you choose?</a></li>
<li class="chapter" data-level="13.4" data-path="store.html"><a href="store.html#select-the-hash-algorithms-of-the-cache"><i class="fa fa-check"></i><b>13.4</b> Select the hash algorithms of the cache</a></li>
<li class="chapter" data-level="13.5" data-path="store.html"><a href="store.html#using-storr-directly"><i class="fa fa-check"></i><b>13.5</b> Using <code>storr</code> directly</a></li>
<li class="chapter" data-level="13.6" data-path="store.html"><a href="store.html#cleaning-up"><i class="fa fa-check"></i><b>13.6</b> Cleaning up</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>A</b> Frequently-asked questions</a></li>
<li class="chapter" data-level="B" data-path="caution.html"><a href="caution.html"><i class="fa fa-check"></i><b>B</b> Cautionary notes</a><ul>
<li class="chapter" data-level="B.1" data-path="caution.html"><a href="caution.html#projects-built-with-drake-4.4.0-are-not-back-compatible-with-drake-4.4.0."><i class="fa fa-check"></i><b>B.1</b> Projects built with drake &lt;= 4.4.0 are not back compatible with drake &gt; 4.4.0.</a></li>
<li class="chapter" data-level="B.2" data-path="caution.html"><a href="caution.html#workflow-plans"><i class="fa fa-check"></i><b>B.2</b> Workflow plans</a><ul>
<li class="chapter" data-level="B.2.1" data-path="caution.html"><a href="caution.html#externalizing-commands-in-r-script-files"><i class="fa fa-check"></i><b>B.2.1</b> Externalizing commands in R script files</a></li>
<li class="chapter" data-level="B.2.2" data-path="caution.html"><a href="caution.html#commands-are-not-perfectly-flexible."><i class="fa fa-check"></i><b>B.2.2</b> Commands are NOT perfectly flexible.</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="caution.html"><a href="caution.html#execution"><i class="fa fa-check"></i><b>B.3</b> Execution</a><ul>
<li class="chapter" data-level="B.3.1" data-path="caution.html"><a href="caution.html#install-drake-properly."><i class="fa fa-check"></i><b>B.3.1</b> Install <code>drake</code> properly.</a></li>
<li class="chapter" data-level="B.3.2" data-path="caution.html"><a href="caution.html#install-all-your-packages."><i class="fa fa-check"></i><b>B.3.2</b> Install all your packages.</a></li>
<li class="chapter" data-level="B.3.3" data-path="caution.html"><a href="caution.html#a-note-on-tidy-evaluation-1"><i class="fa fa-check"></i><b>B.3.3</b> A note on tidy evaluation</a></li>
<li class="chapter" data-level="B.3.4" data-path="caution.html"><a href="caution.html#find-and-diagnose-your-errors."><i class="fa fa-check"></i><b>B.3.4</b> Find and diagnose your errors.</a></li>
<li class="chapter" data-level="B.3.5" data-path="caution.html"><a href="caution.html#refresh-the-drake_config-list-early-and-often."><i class="fa fa-check"></i><b>B.3.5</b> Refresh the <code>drake_config()</code> list early and often.</a></li>
<li class="chapter" data-level="B.3.6" data-path="caution.html"><a href="caution.html#workflows-as-r-packages."><i class="fa fa-check"></i><b>B.3.6</b> Workflows as R packages.</a></li>
<li class="chapter" data-level="B.3.7" data-path="caution.html"><a href="caution.html#the-lazy_load-flag-does-not-work-with-parlapply-parallelism."><i class="fa fa-check"></i><b>B.3.7</b> The <code>lazy_load</code> flag does not work with <code>&quot;parLapply&quot;</code> parallelism.</a></li>
<li class="chapter" data-level="B.3.8" data-path="caution.html"><a href="caution.html#timeouts-may-be-unreliable."><i class="fa fa-check"></i><b>B.3.8</b> Timeouts may be unreliable.</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="caution.html"><a href="caution.html#dependencies-1"><i class="fa fa-check"></i><b>B.4</b> Dependencies</a><ul>
<li class="chapter" data-level="B.4.1" data-path="caution.html"><a href="caution.html#objects-that-contain-functions-may-rebuild-too-often"><i class="fa fa-check"></i><b>B.4.1</b> Objects that contain functions may rebuild too often</a></li>
<li class="chapter" data-level="B.4.2" data-path="caution.html"><a href="caution.html#the-magrittr-dot-.-is-always-ignored."><i class="fa fa-check"></i><b>B.4.2</b> The <code>magrittr</code> dot (<code>.</code>) is always ignored.</a></li>
<li class="chapter" data-level="B.4.3" data-path="caution.html"><a href="caution.html#dependencies-are-not-tracked-in-some-edge-cases."><i class="fa fa-check"></i><b>B.4.3</b> Dependencies are not tracked in some edge cases.</a></li>
<li class="chapter" data-level="B.4.4" data-path="caution.html"><a href="caution.html#dependencies-of-knitr-reports"><i class="fa fa-check"></i><b>B.4.4</b> Dependencies of <code>knitr</code> reports</a></li>
<li class="chapter" data-level="B.4.5" data-path="caution.html"><a href="caution.html#file-outputs-in-imported-functions."><i class="fa fa-check"></i><b>B.4.5</b> File outputs in imported functions.</a></li>
<li class="chapter" data-level="B.4.6" data-path="caution.html"><a href="caution.html#functions-produced-by-vectorize"><i class="fa fa-check"></i><b>B.4.6</b> Functions produced by <code>Vectorize()</code></a></li>
<li class="chapter" data-level="B.4.7" data-path="caution.html"><a href="caution.html#compiled-code-is-not-reproducibly-tracked."><i class="fa fa-check"></i><b>B.4.7</b> Compiled code is not reproducibly tracked.</a></li>
<li class="chapter" data-level="B.4.8" data-path="caution.html"><a href="caution.html#directories-folders-are-not-reproducibly-tracked."><i class="fa fa-check"></i><b>B.4.8</b> Directories (folders) are not reproducibly tracked.</a></li>
<li class="chapter" data-level="B.4.9" data-path="caution.html"><a href="caution.html#packages-are-not-tracked-as-dependencies."><i class="fa fa-check"></i><b>B.4.9</b> Packages are not tracked as dependencies.</a></li>
</ul></li>
<li class="chapter" data-level="B.5" data-path="caution.html"><a href="caution.html#high-performance-computing"><i class="fa fa-check"></i><b>B.5</b> High-performance computing</a><ul>
<li class="chapter" data-level="B.5.1" data-path="caution.html"><a href="caution.html#the-practical-utility-of-parallel-computing"><i class="fa fa-check"></i><b>B.5.1</b> The practical utility of parallel computing</a></li>
<li class="chapter" data-level="B.5.2" data-path="caution.html"><a href="caution.html#maximum-number-of-simultaneous-jobs"><i class="fa fa-check"></i><b>B.5.2</b> Maximum number of simultaneous jobs</a></li>
<li class="chapter" data-level="B.5.3" data-path="caution.html"><a href="caution.html#parallel-computing-on-windows"><i class="fa fa-check"></i><b>B.5.3</b> Parallel computing on Windows</a></li>
<li class="chapter" data-level="B.5.4" data-path="caution.html"><a href="caution.html#configuring-futurebatchtools-parallelism-for-clusters"><i class="fa fa-check"></i><b>B.5.4</b> Configuring <a href="https://github.com/HenrikBengtsson/future">future</a>/<a href="https://github.com/mllg/batchtools">batchtools</a> parallelism for clusters</a></li>
<li class="chapter" data-level="B.5.5" data-path="caution.html"><a href="caution.html#proper-makefiles-are-not-standalone."><i class="fa fa-check"></i><b>B.5.5</b> Proper Makefiles are not standalone.</a></li>
<li class="chapter" data-level="B.5.6" data-path="caution.html"><a href="caution.html#makefile-level-parallelism-for-imported-objects-and-files"><i class="fa fa-check"></i><b>B.5.6</b> Makefile-level parallelism for imported objects and files</a></li>
<li class="chapter" data-level="B.5.7" data-path="caution.html"><a href="caution.html#zombie-processes"><i class="fa fa-check"></i><b>B.5.7</b> Zombie processes</a></li>
</ul></li>
<li class="chapter" data-level="B.6" data-path="caution.html"><a href="caution.html#storage"><i class="fa fa-check"></i><b>B.6</b> Storage</a><ul>
<li class="chapter" data-level="B.6.1" data-path="caution.html"><a href="caution.html#projects-hosted-on-dropbox-and-similar-platforms"><i class="fa fa-check"></i><b>B.6.1</b> Projects hosted on Dropbox and similar platforms</a></li>
<li class="chapter" data-level="B.6.2" data-path="caution.html"><a href="caution.html#cache-customization-is-limited"><i class="fa fa-check"></i><b>B.6.2</b> Cache customization is limited</a></li>
<li class="chapter" data-level="B.6.3" data-path="caution.html"><a href="caution.html#runtime-predictions"><i class="fa fa-check"></i><b>B.6.3</b> Runtime predictions</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The drake R Package User Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vis" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> Visualization with drake</h1>
<p>Data analysis projects have complicated networks of dependencies, and <code>drake</code> can help you visualize them with <code>vis_drake_graph()</code>, <code>sankey_drake_graph()</code>, and <code>drake_ggraph()</code> (note the two g’s).</p>
<div id="vis_drake_graph" class="section level3">
<h3><span class="header-section-number">8.0.1</span> <code>vis_drake_graph()</code></h3>
<p>Powered by <a href="http://datastorm-open.github.io/visNetwork/"><code>visNetwork</code></a>. Colors represent target status, and shapes represent data type. These graphs are interactive, so you can click, drag, zoom, and and pan to adjust the size and position. Double-click on nodes to contract neighborhoods into clusters or expand them back out again. If you hover over a node, you will see text in a tooltip showing the first few lines of</p>
<ul>
<li>The command of a target, or</li>
<li>The body of an imported function, or</li>
<li>The content of an imported text file.</li>
</ul>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" data-line-number="1"><span class="kw">library</span>(drake)</a>
<a class="sourceLine" id="cb151-2" data-line-number="2"><span class="kw">load_mtcars_example</span>() <span class="co"># Get the code with drake_example(&quot;mtcars&quot;).</span></a>
<a class="sourceLine" id="cb151-3" data-line-number="3">config &lt;-<span class="st"> </span><span class="kw">drake_config</span>(my_plan)</a>
<a class="sourceLine" id="cb151-4" data-line-number="4"><span class="kw">vis_drake_graph</span>(config)</a></code></pre></div>
<div id="htmlwidget-c76a9266172c8658d3a3" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-c76a9266172c8658d3a3">{"x":{"nodes":{"id":["\"report.md\"","\"report.Rmd\"","coef_regression1_large","coef_regression1_small","coef_regression2_large","coef_regression2_small","large","random_rows","reg1","reg2","regression1_large","regression1_small","regression2_large","regression2_small","report","simulate","small","summ_regression1_large","summ_regression1_small","summ_regression2_large","summ_regression2_small"],"deps":[{},null,{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"trigger":[{},null,{},{},{},{},{},null,null,null,{},{},{},{},{},null,{},{},{},{},{}],"label":["\"report.md\"","\"report.Rmd\"\n0.004s","coef_regression1_large","coef_regression1_small","coef_regression2_large","coef_regression2_small","large","random_rows\n0.004s","reg1\n0.004s","reg2\n0.004s","regression1_large","regression1_small","regression2_large","regression2_small","report","simulate\n0.004s","small","summ_regression1_large","summ_regression1_small","summ_regression2_large","summ_regression2_small"],"command":["knit(knitr_in(\"report.Rmd\"), file_out(\"report.md\"), quiet = TRUE)",null,"suppressWarnings(summary(regression1_large))$coefficients","suppressWarnings(summary(regression1_small))$coefficients","suppressWarnings(summary(regression2_large))$coefficients","suppressWarnings(summary(regression2_small))$coefficients","simulate(64)",null,null,null,"reg1(large)","reg1(small)","reg2(large)","reg2(small)","knit(knitr_in(\"report.Rmd\"), file_out(\"report.md\"), quiet = TRUE)",null,"simulate(48)","suppressWarnings(summary(regression1_large$residuals))","suppressWarnings(summary(regression1_small$residuals))","suppressWarnings(summary(regression2_large$residuals))","suppressWarnings(summary(regression2_small$residuals))"],"status":["outdated","imported","outdated","outdated","outdated","outdated","outdated","imported","imported","imported","outdated","outdated","outdated","outdated","outdated","imported","outdated","outdated","outdated","outdated","outdated"],"type":["file","file","object","object","object","object","object","function","function","function","object","object","object","object","object","function","object","object","object","object","object"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#000000","#1874CD","#000000","#000000","#000000","#000000","#000000","#1874CD","#1874CD","#1874CD","#000000","#000000","#000000","#000000","#000000","#1874CD","#000000","#000000","#000000","#000000","#000000"],"shape":["square","square","dot","dot","dot","dot","dot","triangle","triangle","triangle","dot","dot","dot","dot","dot","triangle","dot","dot","dot","dot","dot"],"level":[7,1,5,5,5,5,3,1,1,1,4,4,4,4,6,2,3,5,5,5,5],"title":["knit(knitr_in(\"report.Rmd\"),&nbsp;file_out(\"report....","---<br>title: \"Final results report for the mtcars ex...<br>author: You<br>output: html_document<br>---<br><br># The weight and fuel efficiency of cars<br><br>Is there an association between the weight and...<br>...","suppressWarnings(summary(regression1_large))$c...","suppressWarnings(summary(regression1_small))$c...","suppressWarnings(summary(regression2_large))$c...","suppressWarnings(summary(regression2_small))$c...","simulate(64)","function&nbsp;(data,&nbsp;n)&nbsp;<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;data[sample.int(n&nbsp;=&nbsp;nrow(data),&nbsp;size&nbsp;=&nbsp;n,&nbsp;...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>}","function&nbsp;(d)&nbsp;<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;lm(y&nbsp;~&nbsp;+x,&nbsp;data&nbsp;=&nbsp;d)<br>}","function&nbsp;(d)&nbsp;<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;d$x2&nbsp;<-&nbsp;d$x^2<br>&nbsp;&nbsp;&nbsp;&nbsp;lm(y&nbsp;~&nbsp;x2,&nbsp;data&nbsp;=&nbsp;d)<br>}","reg1(large)","reg1(small)","reg2(large)","reg2(small)","knit(knitr_in(\"report.Rmd\"),&nbsp;file_out(\"report....","function&nbsp;(n)&nbsp;<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;<-&nbsp;random_rows(data&nbsp;=&nbsp;mtcars,&nbsp;n&nbsp;=&nbsp;n)<br>&nbsp;&nbsp;&nbsp;&nbsp;data.frame(x&nbsp;=&nbsp;data$wt,&nbsp;y&nbsp;=&nbsp;data$mpg)<br>}","simulate(48)","suppressWarnings(summary(regression1_large$res...","suppressWarnings(summary(regression1_small$res...","suppressWarnings(summary(regression2_large$res...","suppressWarnings(summary(regression2_small$res..."],"x":[-1,-0.545454545454545,-0.272727272727273,0.272727272727273,0.0909090909090908,-0.636363636363636,-0.363636363636364,-0.363636363636364,0.909090909090909,0.0909090909090908,0.727272727272727,1,-0.181818181818182,0.363636363636364,-1,-0.363636363636364,0,0.454545454545455,0.636363636363636,-0.0909090909090909,0.818181818181818],"y":[1,-1,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,-0.333333333333333,-1,-1,-1,0,0,0,0,0.666666666666667,-0.666666666666667,-0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333]},"edges":{"from":["random_rows","reg1","reg1","reg2","reg2","\"report.Rmd\"","coef_regression2_small","large","large","large","small","small","small","simulate","simulate","regression1_small","regression1_small","regression1_large","regression1_large","regression2_small","regression2_small","regression2_large","regression2_large","report"],"to":["simulate","regression1_small","regression1_large","regression2_small","regression2_large","report","report","regression1_large","regression2_large","report","regression1_small","regression2_small","report","large","small","summ_regression1_small","coef_regression1_small","summ_regression1_large","coef_regression1_large","coef_regression2_small","summ_regression2_small","summ_regression2_large","coef_regression2_large","\"report.md\""],"file":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,null],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"],"smooth":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Imported","Object","Function","File"],"color":["#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","triangle","square"],"font.color":["black","black","black","black","black"],"font.size":[20,20,20,20,20],"id":[2,5,7,8,9]},"nodesToDataframe":true},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>To save this interactive widget for later, just supply the name of an HTML file.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(config, <span class="dt">file =</span> <span class="st">&quot;graph.html&quot;</span>)</a></code></pre></div>
<p>To save a static image file, supply a file name that ends in <code>&quot;.png&quot;</code>, <code>&quot;.pdf&quot;</code>, <code>&quot;.jpeg&quot;</code>, or <code>&quot;.jpg&quot;</code>.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(config, <span class="dt">file =</span> <span class="st">&quot;graph.png&quot;</span>)</a></code></pre></div>
</div>
<div id="sankey_drake_graph" class="section level3">
<h3><span class="header-section-number">8.0.2</span> <code>sankey_drake_graph()</code></h3>
<p>These interactive <a href="https://github.com/christophergandrud/networkD3"><code>networkD3</code></a> <a href="https://en.wikipedia.org/wiki/Sankey_diagram">Sankey diagrams</a> have more nuance: the height of each node is proportional to its number of connections. Nodes with many incoming connnections tend to fall out of date more often, and nodes with many outgoing connections can invalidate bigger chunks of the downstream pipeline.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1"><span class="kw">sankey_drake_graph</span>(config)</a></code></pre></div>
<div id="htmlwidget-9832503ab331c471346d" style="width:576px;height:576px;" class="sankeyNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-9832503ab331c471346d">{"x":{"links":{"source":[7,8,8,9,9,1,5,6,6,6,16,16,16,15,15,11,11,10,10,13,13,12,12,14],"target":[15,11,10,13,12,14,14,10,12,14,11,13,14,6,16,18,3,17,2,5,20,19,4,0],"value":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"nodes":{"name":["\"report.md\"","\"report.Rmd\" (0.012s)","coef_regression1_large","coef_regression1_small","coef_regression2_large","coef_regression2_small","large","random_rows (0.004s)","reg1 (0.003s)","reg2 (0.003s)","regression1_large","regression1_small","regression2_large","regression2_small","report","simulate (0.003s)","small","summ_regression1_large","summ_regression1_small","summ_regression2_large","summ_regression2_small"],"group":["outdated","imported","outdated","outdated","outdated","outdated","outdated","imported","imported","imported","outdated","outdated","outdated","outdated","outdated","imported","outdated","outdated","outdated","outdated","outdated"]},"options":{"NodeID":"label","NodeGroup":"status","LinkGroup":null,"colourScale":"d3.scaleOrdinal() .domain(['outdated', 'imported']) .range(['#000000', '#1874CD'])","fontSize":7,"fontFamily":null,"nodeWidth":15,"nodePadding":10,"units":"","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":true}},"evals":[],"jsHooks":[]}</script>
<p>Saving the graphs is the same as before.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" data-line-number="1"><span class="kw">sankey_drake_graph</span>(config, <span class="dt">file =</span> <span class="st">&quot;graph.html&quot;</span>) <span class="co"># Interactive HTML widget</span></a>
<a class="sourceLine" id="cb155-2" data-line-number="2"><span class="kw">sankey_drake_graph</span>(config, <span class="dt">file =</span> <span class="st">&quot;graph.png&quot;</span>)  <span class="co"># Static image file</span></a></code></pre></div>
<p>Unfortunately, a legend is <a href="https://github.com/ropensci/drake/pull/467">not yet available for Sankey diagrams</a>, but <code>drake</code> exposes a separate legend for the colors and shapes.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" data-line-number="1"><span class="kw">library</span>(visNetwork)</a>
<a class="sourceLine" id="cb156-2" data-line-number="2"><span class="kw">legend_nodes</span>()</a>
<a class="sourceLine" id="cb156-3" data-line-number="3">## # A tibble: 10 x 6</a>
<a class="sourceLine" id="cb156-4" data-line-number="4">##    label       color   shape    font.color font.size    id</a>
<a class="sourceLine" id="cb156-5" data-line-number="5">##    &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;int&gt;</a>
<a class="sourceLine" id="cb156-6" data-line-number="6">##  1 Up to date  #228B22 dot      black             20     1</a>
<a class="sourceLine" id="cb156-7" data-line-number="7">##  2 Outdated    #000000 dot      black             20     2</a>
<a class="sourceLine" id="cb156-8" data-line-number="8">##  3 In progress #FF7221 dot      black             20     3</a>
<a class="sourceLine" id="cb156-9" data-line-number="9">##  4 Failed      #AA0000 dot      black             20     4</a>
<a class="sourceLine" id="cb156-10" data-line-number="10">##  5 Imported    #1874CD dot      black             20     5</a>
<a class="sourceLine" id="cb156-11" data-line-number="11">##  6 Missing     #9A32CD dot      black             20     6</a>
<a class="sourceLine" id="cb156-12" data-line-number="12">##  7 Object      #888888 dot      black             20     7</a>
<a class="sourceLine" id="cb156-13" data-line-number="13">##  8 Function    #888888 triangle black             20     8</a>
<a class="sourceLine" id="cb156-14" data-line-number="14">##  9 File        #888888 square   black             20     9</a>
<a class="sourceLine" id="cb156-15" data-line-number="15">## 10 Cluster     #888888 diamond  black             20    10</a>
<a class="sourceLine" id="cb156-16" data-line-number="16"><span class="kw">visNetwork</span>(<span class="dt">nodes =</span> <span class="kw">legend_nodes</span>())</a></code></pre></div>
<div id="htmlwidget-e3d93e3147390cf9f7b2" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-e3d93e3147390cf9f7b2">{"x":{"nodes":{"label":["Up to date","Outdated","In progress","Failed","Imported","Missing","Object","Function","File","Cluster"],"color":["#228B22","#000000","#FF7221","#AA0000","#1874CD","#9A32CD","#888888","#888888","#888888","#888888"],"shape":["dot","dot","dot","dot","dot","dot","dot","triangle","square","diamond"],"font.color":["black","black","black","black","black","black","black","black","black","black"],"font.size":[20,20,20,20,20,20,20,20,20,20],"id":[1,2,3,4,5,6,7,8,9,10]},"edges":null,"nodesToDataframe":true,"edgesToDataframe":false,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot"},"manipulation":{"enabled":false}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false},"byselection":{"enabled":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="drake_ggraph" class="section level3">
<h3><span class="header-section-number">8.0.3</span> <code>drake_ggraph()</code></h3>
<p>Powered by <a href="https://github.com/thomasp85/ggraph"><code>ggraph</code></a>, these graphs are static <a href="https://github.com/tidyverse/ggplot2"><code>ggplot2</code></a> objects, and you can save them with <code>ggsave()</code>.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" data-line-number="1">plan &lt;-<span class="st"> </span><span class="kw">drake_plan</span>(<span class="dt">data =</span> <span class="kw">get_data</span>(), <span class="dt">model =</span> data, <span class="dt">plot =</span> data)</a>
<a class="sourceLine" id="cb157-2" data-line-number="2">plan</a>
<a class="sourceLine" id="cb157-3" data-line-number="3">## # A tibble: 3 x 2</a>
<a class="sourceLine" id="cb157-4" data-line-number="4">##   target command   </a>
<a class="sourceLine" id="cb157-5" data-line-number="5">##   &lt;chr&gt;  &lt;chr&gt;     </a>
<a class="sourceLine" id="cb157-6" data-line-number="6">## 1 data   get_data()</a>
<a class="sourceLine" id="cb157-7" data-line-number="7">## 2 model  data      </a>
<a class="sourceLine" id="cb157-8" data-line-number="8">## 3 plot   data</a>
<a class="sourceLine" id="cb157-9" data-line-number="9">get_data &lt;-<span class="st"> </span><span class="cf">function</span>(){}</a>
<a class="sourceLine" id="cb157-10" data-line-number="10">config &lt;-<span class="st"> </span><span class="kw">drake_config</span>(plan)</a>
<a class="sourceLine" id="cb157-11" data-line-number="11"><span class="kw">drake_ggraph</span>(config)</a></code></pre></div>
<p><img src="drake-manual_files/figure-html/static-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="underlying-graph-data-node-and-edge-data-frames" class="section level2">
<h2><span class="header-section-number">8.1</span> Underlying graph data: node and edge data frames</h2>
<p><code>drake_graph_info()</code> is used behind the scenes in <code>vis_drake_graph()</code>, <code>sankey_drake_graph()</code>, and <code>drake_ggraph()</code> to get the graph information ready for rendering. To save time, you can call <code>drake_graph_info()</code> to get these internals and then call <code>render_drake_graph()</code>, <code>render_sankey_drake_graph()</code>, or <code>render_drake_ggraph()</code>.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" data-line-number="1"><span class="kw">str</span>(<span class="kw">drake_graph_info</span>(config))</a>
<a class="sourceLine" id="cb158-2" data-line-number="2">## List of 4</a>
<a class="sourceLine" id="cb158-3" data-line-number="3">##  $ nodes        :Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:   4 obs. of  12 variables:</a>
<a class="sourceLine" id="cb158-4" data-line-number="4">##   ..$ id       : chr [1:4] &quot;data&quot; &quot;get_data&quot; &quot;model&quot; &quot;plot&quot;</a>
<a class="sourceLine" id="cb158-5" data-line-number="5">##   ..$ deps     :List of 4</a>
<a class="sourceLine" id="cb158-6" data-line-number="6">##   .. ..$ :&lt;environment: 0xe213c68&gt; </a>
<a class="sourceLine" id="cb158-7" data-line-number="7">##   .. ..$ :&lt;environment: 0xfda2620&gt; </a>
<a class="sourceLine" id="cb158-8" data-line-number="8">##   .. ..$ :&lt;environment: 0xe3a1248&gt; </a>
<a class="sourceLine" id="cb158-9" data-line-number="9">##   .. ..$ :&lt;environment: 0xe4938a8&gt; </a>
<a class="sourceLine" id="cb158-10" data-line-number="10">##   ..$ trigger  :List of 4</a>
<a class="sourceLine" id="cb158-11" data-line-number="11">##   .. ..$ :&lt;environment: 0xe5d65a0&gt; </a>
<a class="sourceLine" id="cb158-12" data-line-number="12">##   .. ..$ : NULL</a>
<a class="sourceLine" id="cb158-13" data-line-number="13">##   .. ..$ :&lt;environment: 0xe5d5c00&gt; </a>
<a class="sourceLine" id="cb158-14" data-line-number="14">##   .. ..$ :&lt;environment: 0xe5d5180&gt; </a>
<a class="sourceLine" id="cb158-15" data-line-number="15">##   ..$ label    : chr [1:4] &quot;data&quot; &quot;get_data\n0.003s&quot; &quot;model&quot; &quot;plot&quot;</a>
<a class="sourceLine" id="cb158-16" data-line-number="16">##   ..$ command  : chr [1:4] &quot;get_data()&quot; NA &quot;data&quot; &quot;data&quot;</a>
<a class="sourceLine" id="cb158-17" data-line-number="17">##   ..$ status   : chr [1:4] &quot;outdated&quot; &quot;imported&quot; &quot;outdated&quot; &quot;outdated&quot;</a>
<a class="sourceLine" id="cb158-18" data-line-number="18">##   ..$ type     : chr [1:4] &quot;object&quot; &quot;function&quot; &quot;object&quot; &quot;object&quot;</a>
<a class="sourceLine" id="cb158-19" data-line-number="19">##   ..$ font.size: num [1:4] 20 20 20 20</a>
<a class="sourceLine" id="cb158-20" data-line-number="20">##   ..$ color    : chr [1:4] &quot;#000000&quot; &quot;#1874CD&quot; &quot;#000000&quot; &quot;#000000&quot;</a>
<a class="sourceLine" id="cb158-21" data-line-number="21">##   ..$ shape    : chr [1:4] &quot;dot&quot; &quot;triangle&quot; &quot;dot&quot; &quot;dot&quot;</a>
<a class="sourceLine" id="cb158-22" data-line-number="22">##   ..$ level    : int [1:4] 2 1 3 3</a>
<a class="sourceLine" id="cb158-23" data-line-number="23">##   ..$ title    : chr [1:4] &quot;get_data()&quot; &quot;function&amp;nbsp;()&amp;nbsp;&lt;br&gt;{&lt;br&gt;}&quot; &quot;data&quot; &quot;data&quot;</a>
<a class="sourceLine" id="cb158-24" data-line-number="24">##  $ edges        :Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:   3 obs. of  5 variables:</a>
<a class="sourceLine" id="cb158-25" data-line-number="25">##   ..$ from  : chr [1:3] &quot;get_data&quot; &quot;data&quot; &quot;data&quot;</a>
<a class="sourceLine" id="cb158-26" data-line-number="26">##   ..$ to    : chr [1:3] &quot;data&quot; &quot;model&quot; &quot;plot&quot;</a>
<a class="sourceLine" id="cb158-27" data-line-number="27">##   ..$ file  : int [1:3] 0 0 0</a>
<a class="sourceLine" id="cb158-28" data-line-number="28">##   ..$ arrows: chr [1:3] &quot;to&quot; &quot;to&quot; &quot;to&quot;</a>
<a class="sourceLine" id="cb158-29" data-line-number="29">##   ..$ smooth: logi [1:3] TRUE TRUE TRUE</a>
<a class="sourceLine" id="cb158-30" data-line-number="30">##  $ legend_nodes :Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:   4 obs. of  6 variables:</a>
<a class="sourceLine" id="cb158-31" data-line-number="31">##   ..$ label     : chr [1:4] &quot;Outdated&quot; &quot;Imported&quot; &quot;Object&quot; &quot;Function&quot;</a>
<a class="sourceLine" id="cb158-32" data-line-number="32">##   ..$ color     : chr [1:4] &quot;#000000&quot; &quot;#1874CD&quot; &quot;#888888&quot; &quot;#888888&quot;</a>
<a class="sourceLine" id="cb158-33" data-line-number="33">##   ..$ shape     : chr [1:4] &quot;dot&quot; &quot;dot&quot; &quot;dot&quot; &quot;triangle&quot;</a>
<a class="sourceLine" id="cb158-34" data-line-number="34">##   ..$ font.color: chr [1:4] &quot;black&quot; &quot;black&quot; &quot;black&quot; &quot;black&quot;</a>
<a class="sourceLine" id="cb158-35" data-line-number="35">##   ..$ font.size : num [1:4] 20 20 20 20</a>
<a class="sourceLine" id="cb158-36" data-line-number="36">##   ..$ id        : int [1:4] 2 5 7 8</a>
<a class="sourceLine" id="cb158-37" data-line-number="37">##  $ default_title: chr &quot;Dependency graph&quot;</a></code></pre></div>
</div>
<div id="visualizing-target-status" class="section level2">
<h2><span class="header-section-number">8.2</span> Visualizing target status</h2>
<p><code>drake</code>’s visuals tell you which targets are up to date and which are outdated.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" data-line-number="1">config &lt;-<span class="st"> </span><span class="kw">make</span>(my_plan, <span class="dt">jobs =</span> <span class="dv">2</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb159-2" data-line-number="2">## Error: package txtq not installed. Please install it with install.packages(&quot;txtq&quot;).</a>
<a class="sourceLine" id="cb159-3" data-line-number="3"><span class="kw">outdated</span>(config)</a>
<a class="sourceLine" id="cb159-4" data-line-number="4">## [1] &quot;data&quot;  &quot;model&quot; &quot;plot&quot;</a>
<a class="sourceLine" id="cb159-5" data-line-number="5"><span class="kw">sankey_drake_graph</span>(config)</a></code></pre></div>
<div id="htmlwidget-ff72399370c1bb4b860b" style="width:576px;height:576px;" class="sankeyNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-ff72399370c1bb4b860b">{"x":{"links":{"source":[1,0,0],"target":[0,2,3],"value":[1,1,1]},"nodes":{"name":["data","get_data (0.003s)","model","plot"],"group":["outdated","imported","outdated","outdated"]},"options":{"NodeID":"label","NodeGroup":"status","LinkGroup":null,"colourScale":"d3.scaleOrdinal() .domain(['outdated', 'imported']) .range(['#000000', '#1874CD'])","fontSize":7,"fontFamily":null,"nodeWidth":15,"nodePadding":10,"units":"","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":true}},"evals":[],"jsHooks":[]}</script>
<p>When you change a dependency, some targets fall out of date (black nodes).</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" data-line-number="1">reg2 &lt;-<span class="st"> </span><span class="cf">function</span>(d){</a>
<a class="sourceLine" id="cb160-2" data-line-number="2">  d<span class="op">$</span>x3 &lt;-<span class="st"> </span>d<span class="op">$</span>x <span class="op">^</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb160-3" data-line-number="3">  <span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x3, <span class="dt">data =</span> d)</a>
<a class="sourceLine" id="cb160-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb160-5" data-line-number="5"><span class="kw">sankey_drake_graph</span>(config)</a></code></pre></div>
<div id="htmlwidget-015df119758687bd827d" style="width:576px;height:576px;" class="sankeyNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-015df119758687bd827d">{"x":{"links":{"source":[1,0,0],"target":[0,2,3],"value":[1,1,1]},"nodes":{"name":["data","get_data (0.003s)","model","plot"],"group":["outdated","imported","outdated","outdated"]},"options":{"NodeID":"label","NodeGroup":"status","LinkGroup":null,"colourScale":"d3.scaleOrdinal() .domain(['outdated', 'imported']) .range(['#000000', '#1874CD'])","fontSize":7,"fontFamily":null,"nodeWidth":15,"nodePadding":10,"units":"","margin":{"top":null,"right":null,"bottom":null,"left":null},"iterations":32,"sinksRight":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="subgraphs" class="section level2">
<h2><span class="header-section-number">8.3</span> Subgraphs</h2>
<p>Graphs can grow enormous for serious projects, so there are multiple ways to focus on a manageable subgraph. The most brute-force way is to just pick a manual <code>subset</code> of nodes. However, with the <code>subset</code> argument, the graphing functions can drop intermediate nodes and edges.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(</a>
<a class="sourceLine" id="cb161-2" data-line-number="2">  config,</a>
<a class="sourceLine" id="cb161-3" data-line-number="3">  <span class="dt">subset =</span> <span class="kw">c</span>(<span class="st">&quot;regression2_small&quot;</span>, <span class="st">&quot;large&quot;</span>)</a>
<a class="sourceLine" id="cb161-4" data-line-number="4">)</a>
<a class="sourceLine" id="cb161-5" data-line-number="5">## Error in `$&lt;-.data.frame`(`*tmp*`, status, value = &quot;imported&quot;): replacement has 1 row, data has 0</a></code></pre></div>
<p>The rest of the subgraph functionality preserves connectedness. Use <code>targets_only</code> to ignore the imports.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(config, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div id="htmlwidget-8389d587c1365d305edc" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-8389d587c1365d305edc">{"x":{"nodes":{"id":["data","model","plot"],"deps":[{},{},{}],"trigger":[{},{},{}],"label":["data","model","plot"],"command":["get_data()","data","data"],"status":["outdated","outdated","outdated"],"type":["object","object","object"],"font.size":[20,20,20],"color":["#000000","#000000","#000000"],"shape":["dot","dot","dot"],"level":[1,2,2],"title":["get_data()","data","data"],"x":[0,-1,1],"y":[-1,1,1]},"edges":{"from":["data","data"],"to":["model","plot"],"file":[0,0],"arrows":["to","to"],"smooth":[true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Object"],"color":["#000000","#888888"],"shape":["dot","dot"],"font.color":["black","black"],"font.size":[20,20],"id":[2,7]},"nodesToDataframe":true},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>Similarly, you can just show downstream nodes.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(config, <span class="dt">from =</span> <span class="kw">c</span>(<span class="st">&quot;regression2_small&quot;</span>, <span class="st">&quot;regression2_large&quot;</span>))</a>
<a class="sourceLine" id="cb163-2" data-line-number="2">## Error: All import/target names are invalid in argument &#39;targets&#39;, &#39;from&#39;, or &#39;subset&#39; for make() or similar function.</a></code></pre></div>
<p>Or upstream ones.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(config, <span class="dt">from =</span> <span class="st">&quot;small&quot;</span>, <span class="dt">mode =</span> <span class="st">&quot;in&quot;</span>)</a>
<a class="sourceLine" id="cb164-2" data-line-number="2">## Error: All import/target names are invalid in argument &#39;targets&#39;, &#39;from&#39;, or &#39;subset&#39; for make() or similar function.</a></code></pre></div>
<p>In fact, let us just take a small neighborhood around a target in both directions. For the graph below, given order is 1, but all the custom <code>file_out()</code> output files of the neighborhood’s targets appear as well. This ensures consistent behavior between <code>show_output_files = TRUE</code> and <code>show_output_files = FALSE</code> (more on that later).</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(config, <span class="dt">from =</span> <span class="st">&quot;small&quot;</span>, <span class="dt">mode =</span> <span class="st">&quot;all&quot;</span>, <span class="dt">order =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb165-2" data-line-number="2">## Error: All import/target names are invalid in argument &#39;targets&#39;, &#39;from&#39;, or &#39;subset&#39; for make() or similar function.</a></code></pre></div>
</div>
<div id="control-the-vis_drake_graph-legend." class="section level2">
<h2><span class="header-section-number">8.4</span> Control the <code>vis_drake_graph()</code> legend.</h2>
<p>Some arguments to <code>vis_drake_graph()</code> control the legend.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(config, <span class="dt">full_legend =</span> <span class="ot">TRUE</span>, <span class="dt">ncol_legend =</span> <span class="dv">2</span>)</a></code></pre></div>
<div id="htmlwidget-5f359c3005b52ad32a6a" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-5f359c3005b52ad32a6a">{"x":{"nodes":{"id":["data","get_data","model","plot"],"deps":[{},{},{},{}],"trigger":[{},null,{},{}],"label":["data","get_data\n0.002s","model","plot"],"command":["get_data()",null,"data","data"],"status":["outdated","imported","outdated","outdated"],"type":["object","function","object","object"],"font.size":[20,20,20,20],"color":["#000000","#1874CD","#000000","#000000"],"shape":["dot","triangle","dot","dot"],"level":[2,1,3,3],"title":["get_data()","function&nbsp;()&nbsp;<br>{<br>}","data","data"],"x":[0,0,-1,1],"y":[0,-1,1,1]},"edges":{"from":["get_data","data","data"],"to":["data","model","plot"],"file":[0,0,0],"arrows":["to","to","to"],"smooth":[true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":2,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","In progress","Failed","Imported","Missing","Object","Function","File","Cluster"],"color":["#228B22","#000000","#FF7221","#AA0000","#1874CD","#9A32CD","#888888","#888888","#888888","#888888"],"shape":["dot","dot","dot","dot","dot","dot","dot","triangle","square","diamond"],"font.color":["black","black","black","black","black","black","black","black","black","black"],"font.size":[20,20,20,20,20,20,20,20,20,20],"id":[1,2,3,4,5,6,7,8,9,10]},"nodesToDataframe":true},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>To remove the legend altogether, set the <code>ncol_legend</code> argument to <code>0</code>.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(config, <span class="dt">ncol_legend =</span> <span class="dv">0</span>)</a></code></pre></div>
<div id="htmlwidget-aa835e5b172731c82f1e" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-aa835e5b172731c82f1e">{"x":{"nodes":{"id":["data","get_data","model","plot"],"deps":[{},{},{},{}],"trigger":[{},null,{},{}],"label":["data","get_data\n0.004s","model","plot"],"command":["get_data()",null,"data","data"],"status":["outdated","imported","outdated","outdated"],"type":["object","function","object","object"],"font.size":[20,20,20,20],"color":["#000000","#1874CD","#000000","#000000"],"shape":["dot","triangle","dot","dot"],"level":[2,1,3,3],"title":["get_data()","function&nbsp;()&nbsp;<br>{<br>}","data","data"],"x":[0,0,-1,1],"y":[0,-1,1,1]},"edges":{"from":["get_data","data","data"],"to":["data","model","plot"],"file":[0,0,0],"arrows":["to","to","to"],"smooth":[true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="clusters" class="section level2">
<h2><span class="header-section-number">8.5</span> Clusters</h2>
<p>With the <code>group</code> and <code>clusters</code> arguments to the graphing functions, you can condense nodes into clusters. This is handy for workflows with lots of targets. Take the schools scenario from the <a href="plans.html#plans">workflow plan guide</a>. Our plan was generated with <code>evaluate_plan(trace = TRUE)</code>, so it has wildcard columns that group nodes into natural clusters already. You can manually add such columns if you wish.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1">plan_template &lt;-<span class="st"> </span><span class="kw">drake_plan</span>(</a>
<a class="sourceLine" id="cb168-2" data-line-number="2">  <span class="dt">school =</span> <span class="kw">get_school_data</span>(<span class="st">&quot;school__&quot;</span>),</a>
<a class="sourceLine" id="cb168-3" data-line-number="3">  <span class="dt">credits =</span> <span class="kw">check_credit_hours</span>(all_schools__),</a>
<a class="sourceLine" id="cb168-4" data-line-number="4">  <span class="dt">students =</span> <span class="kw">check_students</span>(all_schools__),</a>
<a class="sourceLine" id="cb168-5" data-line-number="5">  <span class="dt">grads =</span> <span class="kw">check_graduations</span>(all_schools__),</a>
<a class="sourceLine" id="cb168-6" data-line-number="6">  <span class="dt">public_funds =</span> <span class="kw">check_public_funding</span>(public_schools__)</a>
<a class="sourceLine" id="cb168-7" data-line-number="7">)</a>
<a class="sourceLine" id="cb168-8" data-line-number="8">plan &lt;-<span class="st"> </span><span class="kw">evaluate_plan</span>(</a>
<a class="sourceLine" id="cb168-9" data-line-number="9">  <span class="dt">plan =</span> plan_template,</a>
<a class="sourceLine" id="cb168-10" data-line-number="10">  <span class="dt">rules =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb168-11" data-line-number="11">    <span class="dt">school__ =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>),</a>
<a class="sourceLine" id="cb168-12" data-line-number="12">    <span class="dt">all_schools__ =</span>  <span class="kw">c</span>(<span class="st">&quot;school_A&quot;</span>, <span class="st">&quot;school_B&quot;</span>, <span class="st">&quot;school_C&quot;</span>),</a>
<a class="sourceLine" id="cb168-13" data-line-number="13">    <span class="dt">public_schools__ =</span> <span class="kw">c</span>(<span class="st">&quot;school_A&quot;</span>, <span class="st">&quot;school_B&quot;</span>)</a>
<a class="sourceLine" id="cb168-14" data-line-number="14">  ),</a>
<a class="sourceLine" id="cb168-15" data-line-number="15">  <span class="dt">trace =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb168-16" data-line-number="16">)</a>
<a class="sourceLine" id="cb168-17" data-line-number="17">plan</a>
<a class="sourceLine" id="cb168-18" data-line-number="18">## # A tibble: 14 x 8</a>
<a class="sourceLine" id="cb168-19" data-line-number="19">##    target command school__ school___from all_schools__ all_schools___f…</a>
<a class="sourceLine" id="cb168-20" data-line-number="20">##    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;           </a>
<a class="sourceLine" id="cb168-21" data-line-number="21">##  1 schoo… &quot;get_s… A        school        &lt;NA&gt;          &lt;NA&gt;            </a>
<a class="sourceLine" id="cb168-22" data-line-number="22">##  2 schoo… &quot;get_s… B        school        &lt;NA&gt;          &lt;NA&gt;            </a>
<a class="sourceLine" id="cb168-23" data-line-number="23">##  3 schoo… &quot;get_s… C        school        &lt;NA&gt;          &lt;NA&gt;            </a>
<a class="sourceLine" id="cb168-24" data-line-number="24">##  4 credi… check_… &lt;NA&gt;     &lt;NA&gt;          school_A      credits         </a>
<a class="sourceLine" id="cb168-25" data-line-number="25">##  5 credi… check_… &lt;NA&gt;     &lt;NA&gt;          school_B      credits         </a>
<a class="sourceLine" id="cb168-26" data-line-number="26">##  6 credi… check_… &lt;NA&gt;     &lt;NA&gt;          school_C      credits         </a>
<a class="sourceLine" id="cb168-27" data-line-number="27">##  7 stude… check_… &lt;NA&gt;     &lt;NA&gt;          school_A      students        </a>
<a class="sourceLine" id="cb168-28" data-line-number="28">##  8 stude… check_… &lt;NA&gt;     &lt;NA&gt;          school_B      students        </a>
<a class="sourceLine" id="cb168-29" data-line-number="29">##  9 stude… check_… &lt;NA&gt;     &lt;NA&gt;          school_C      students        </a>
<a class="sourceLine" id="cb168-30" data-line-number="30">## 10 grads… check_… &lt;NA&gt;     &lt;NA&gt;          school_A      grads           </a>
<a class="sourceLine" id="cb168-31" data-line-number="31">## 11 grads… check_… &lt;NA&gt;     &lt;NA&gt;          school_B      grads           </a>
<a class="sourceLine" id="cb168-32" data-line-number="32">## 12 grads… check_… &lt;NA&gt;     &lt;NA&gt;          school_C      grads           </a>
<a class="sourceLine" id="cb168-33" data-line-number="33">## 13 publi… check_… &lt;NA&gt;     &lt;NA&gt;          &lt;NA&gt;          &lt;NA&gt;            </a>
<a class="sourceLine" id="cb168-34" data-line-number="34">## 14 publi… check_… &lt;NA&gt;     &lt;NA&gt;          &lt;NA&gt;          &lt;NA&gt;            </a>
<a class="sourceLine" id="cb168-35" data-line-number="35">## # ... with 2 more variables: public_schools__ &lt;chr&gt;,</a>
<a class="sourceLine" id="cb168-36" data-line-number="36">## #   public_schools___from &lt;chr&gt;</a></code></pre></div>
<p>Ordinarily, the workflow graph gives a separate node to each individual import object or target.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" data-line-number="1">config &lt;-<span class="st"> </span><span class="kw">drake_config</span>(plan)</a>
<a class="sourceLine" id="cb169-2" data-line-number="2"><span class="kw">vis_drake_graph</span>(config)</a></code></pre></div>
<div id="htmlwidget-81adead678b0cc5b2a3d" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-81adead678b0cc5b2a3d">{"x":{"nodes":{"id":["check_credit_hours","check_graduations","check_public_funding","check_students","credits_school_A","credits_school_B","credits_school_C","get_school_data","grads_school_A","grads_school_B","grads_school_C","public_funds_school_A","public_funds_school_B","school_A","school_B","school_C","students_school_A","students_school_B","students_school_C"],"deps":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"trigger":[null,null,null,null,{},{},{},null,{},{},{},{},{},{},{},{},{},{},{}],"label":["check_credit_hours\n0.003s","check_graduations\n0.003s","check_public_funding\n0.003s","check_students\n0.003s","credits_school_A","credits_school_B","credits_school_C","get_school_data\n0.004s","grads_school_A","grads_school_B","grads_school_C","public_funds_school_A","public_funds_school_B","school_A","school_B","school_C","students_school_A","students_school_B","students_school_C"],"command":[null,null,null,null,"check_credit_hours(school_A)","check_credit_hours(school_B)","check_credit_hours(school_C)",null,"check_graduations(school_A)","check_graduations(school_B)","check_graduations(school_C)","check_public_funding(school_A)","check_public_funding(school_B)","get_school_data(\"A\")","get_school_data(\"B\")","get_school_data(\"C\")","check_students(school_A)","check_students(school_B)","check_students(school_C)"],"school__":[null,null,null,null,null,null,null,null,null,null,null,null,null,"A","B","C",null,null,null],"school___from":[null,null,null,null,null,null,null,null,null,null,null,null,null,"school","school","school",null,null,null],"all_schools__":[null,null,null,null,"school_A","school_B","school_C",null,"school_A","school_B","school_C",null,null,null,null,null,"school_A","school_B","school_C"],"all_schools___from":[null,null,null,null,"credits","credits","credits",null,"grads","grads","grads",null,null,null,null,null,"students","students","students"],"public_schools__":[null,null,null,null,null,null,null,null,null,null,null,"school_A","school_B",null,null,null,null,null,null],"public_schools___from":[null,null,null,null,null,null,null,null,null,null,null,"public_funds","public_funds",null,null,null,null,null,null],"status":["imported","imported","imported","imported","outdated","outdated","outdated","imported","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated"],"type":["function","function","function","function","object","object","object","function","object","object","object","object","object","object","object","object","object","object","object"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#000000","#000000","#000000","#1874CD","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],"shape":["triangle","triangle","triangle","triangle","dot","dot","dot","triangle","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot"],"level":[1,1,1,1,3,3,3,1,3,3,3,3,3,2,2,2,3,3,3],"title":["function&nbsp;()&nbsp;<br>{<br>}","function&nbsp;()&nbsp;<br>{<br>}","function&nbsp;()&nbsp;<br>{<br>}","function&nbsp;()&nbsp;<br>{<br>}","check_credit_hours(school_A)","check_credit_hours(school_B)","check_credit_hours(school_C)","function&nbsp;()&nbsp;<br>{<br>}","check_graduations(school_A)","check_graduations(school_B)","check_graduations(school_C)","check_public_funding(school_A)","check_public_funding(school_B)","get_school_data(\"A\")","get_school_data(\"B\")","get_school_data(\"C\")","check_students(school_A)","check_students(school_B)","check_students(school_C)"],"x":[-0.846153846153846,-0.384615384615385,0.538461538461539,0.923076923076923,-1,-0.692307692307692,-0.846153846153846,0.153846153846154,-0.384615384615385,0.0769230769230769,-0.153846153846154,0.384615384615385,0.538461538461539,-0.230769230769231,0.230769230769231,0.0769230769230769,0.692307692307692,0.846153846153846,1],"y":[-1,-1,-1,-1,1,1,1,-1,1,1,1,1,1,0,0,0,1,1,1]},"edges":{"from":["get_school_data","get_school_data","get_school_data","check_graduations","check_graduations","check_graduations","check_credit_hours","check_credit_hours","check_credit_hours","check_public_funding","check_public_funding","check_students","check_students","check_students","school_A","school_A","school_A","school_A","school_B","school_B","school_B","school_B","school_C","school_C","school_C"],"to":["school_A","school_B","school_C","grads_school_A","grads_school_B","grads_school_C","credits_school_A","credits_school_B","credits_school_C","public_funds_school_A","public_funds_school_B","students_school_A","students_school_B","students_school_C","credits_school_A","students_school_A","grads_school_A","public_funds_school_A","credits_school_B","students_school_B","grads_school_B","public_funds_school_B","credits_school_C","students_school_C","grads_school_C"],"file":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"],"smooth":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Imported","Object","Function"],"color":["#000000","#1874CD","#888888","#888888"],"shape":["dot","dot","dot","triangle"],"font.color":["black","black","black","black"],"font.size":[20,20,20,20],"id":[2,5,7,8]},"nodesToDataframe":true},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>For large projects with hundreds of nodes, this can get quite cumbersome. But here, we can choose a wildcard column (or any other column in the plan, even custom columns) to condense nodes into natural clusters. For the <code>group</code> argument to the graphing functions, choose the name of a column in <code>plan</code> or a column you know will be in <code>drake_graph_info(config)$nodes</code>. Then for <code>clusters</code>, choose the values in your <code>group</code> column that correspond to nodes you want to bunch together. The new graph is not as cumbersome.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" data-line-number="1">config &lt;-<span class="st"> </span><span class="kw">drake_config</span>(plan)</a>
<a class="sourceLine" id="cb170-2" data-line-number="2"><span class="kw">vis_drake_graph</span>(</a>
<a class="sourceLine" id="cb170-3" data-line-number="3">  config,</a>
<a class="sourceLine" id="cb170-4" data-line-number="4">  <span class="dt">group =</span> <span class="st">&quot;all_schools__&quot;</span>,</a>
<a class="sourceLine" id="cb170-5" data-line-number="5">  <span class="dt">clusters =</span> <span class="kw">c</span>(<span class="st">&quot;school_A&quot;</span>, <span class="st">&quot;school_B&quot;</span>, <span class="st">&quot;school_C&quot;</span>)</a>
<a class="sourceLine" id="cb170-6" data-line-number="6">)</a></code></pre></div>
<div id="htmlwidget-0610b3049aafd73d3fcb" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-0610b3049aafd73d3fcb">{"x":{"nodes":{"id":["check_credit_hours","check_graduations","check_public_funding","check_students","get_school_data","public_funds_school_A","public_funds_school_B","school_A","school_B","school_C","all_schools__: school_A","all_schools__: school_B","all_schools__: school_C"],"deps":[{},{},{},{},{},{},{},{},{},{},{},{},{}],"trigger":[null,null,null,null,null,{},{},{},{},{},{},{},{}],"label":["check_credit_hours\n0.003s","check_graduations\n0.003s","check_public_funding\n0.003s","check_students\n0.003s","get_school_data\n0.003s","public_funds_school_A","public_funds_school_B","school_A","school_B","school_C","all_schools__: school_A","all_schools__: school_B","all_schools__: school_C"],"command":[null,null,null,null,null,"check_public_funding(school_A)","check_public_funding(school_B)","get_school_data(\"A\")","get_school_data(\"B\")","get_school_data(\"C\")","check_credit_hours(school_A)","check_credit_hours(school_B)","check_credit_hours(school_C)"],"school__":[null,null,null,null,null,null,null,"A","B","C",null,null,null],"school___from":[null,null,null,null,null,null,null,"school","school","school",null,null,null],"all_schools__":[null,null,null,null,null,null,null,null,null,null,"school_A","school_B","school_C"],"all_schools___from":[null,null,null,null,null,null,null,null,null,null,"credits","credits","credits"],"public_schools__":[null,null,null,null,null,"school_A","school_B",null,null,null,null,null,null],"public_schools___from":[null,null,null,null,null,"public_funds","public_funds",null,null,null,null,null,null],"status":["imported","imported","imported","imported","imported","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated"],"type":["function","function","function","function","function","object","object","object","object","object","cluster","cluster","cluster"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#1874CD","#1874CD","#1874CD","#1874CD","#1874CD","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],"shape":["triangle","triangle","triangle","triangle","triangle","dot","dot","dot","dot","dot","diamond","diamond","diamond"],"level":[1,1,1,1,1,3,3,2,2,2,3,3,3],"title":["function&nbsp;()&nbsp;<br>{<br>}","function&nbsp;()&nbsp;<br>{<br>}","function&nbsp;()&nbsp;<br>{<br>}","function&nbsp;()&nbsp;<br>{<br>}","function&nbsp;()&nbsp;<br>{<br>}","check_public_funding(school_A)","check_public_funding(school_B)","get_school_data(\"A\")","get_school_data(\"B\")","get_school_data(\"C\")","credits_school_A, grads_school_A, students_sch...","credits_school_B, grads_school_B, students_sch...","credits_school_C, grads_school_C, students_sch..."],"x":[-0.523809523809524,-1,1,-0.80952380952381,0.238095238095238,0.80952380952381,1,-0.238095238095238,0.714285714285714,0.333333333333333,-1,-0.428571428571429,0.333333333333333],"y":[-1,-1,-1,-1,-1,1,1,0,0,0,1,1,1]},"edges":{"from":["get_school_data","get_school_data","get_school_data","check_graduations","check_graduations","check_graduations","check_credit_hours","check_credit_hours","check_credit_hours","check_public_funding","check_public_funding","check_students","check_students","check_students","school_A","school_A","school_B","school_B","school_C"],"to":["school_A","school_B","school_C","all_schools__: school_A","all_schools__: school_B","all_schools__: school_C","all_schools__: school_A","all_schools__: school_B","all_schools__: school_C","public_funds_school_A","public_funds_school_B","all_schools__: school_A","all_schools__: school_B","all_schools__: school_C","all_schools__: school_A","public_funds_school_A","all_schools__: school_B","public_funds_school_B","all_schools__: school_C"],"file":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"],"smooth":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Imported","Object","Function","Cluster"],"color":["#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","triangle","diamond"],"font.color":["black","black","black","black","black"],"font.size":[20,20,20,20,20],"id":[2,5,7,8,10]},"nodesToDataframe":true},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>As I mentioned, you can group on any column in <code>drake_graph_info(config)$nodes</code>. Let’s return to the <code>mtcars</code> project for demonstration.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" data-line-number="1">config &lt;-<span class="st"> </span><span class="kw">drake_config</span>(my_plan)</a>
<a class="sourceLine" id="cb171-2" data-line-number="2"><span class="kw">vis_drake_graph</span>(config)</a></code></pre></div>
<div id="htmlwidget-3a2661fca5f246b54697" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-3a2661fca5f246b54697">{"x":{"nodes":{"id":["\"report.md\"","\"report.Rmd\"","coef_regression1_large","coef_regression1_small","coef_regression2_large","coef_regression2_small","large","random_rows","reg1","reg2","regression1_large","regression1_small","regression2_large","regression2_small","report","simulate","small","summ_regression1_large","summ_regression1_small","summ_regression2_large","summ_regression2_small"],"deps":[{},null,{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"trigger":[{},null,{},{},{},{},{},null,null,null,{},{},{},{},{},null,{},{},{},{},{}],"label":["\"report.md\"","\"report.Rmd\"\n0.005s","coef_regression1_large","coef_regression1_small","coef_regression2_large","coef_regression2_small","large","random_rows\n0.004s","reg1\n0.003s","reg2\n0.004s","regression1_large","regression1_small","regression2_large","regression2_small","report","simulate\n0.003s","small","summ_regression1_large","summ_regression1_small","summ_regression2_large","summ_regression2_small"],"command":["knit(knitr_in(\"report.Rmd\"), file_out(\"report.md\"), quiet = TRUE)",null,"suppressWarnings(summary(regression1_large))$coefficients","suppressWarnings(summary(regression1_small))$coefficients","suppressWarnings(summary(regression2_large))$coefficients","suppressWarnings(summary(regression2_small))$coefficients","simulate(64)",null,null,null,"reg1(large)","reg1(small)","reg2(large)","reg2(small)","knit(knitr_in(\"report.Rmd\"), file_out(\"report.md\"), quiet = TRUE)",null,"simulate(48)","suppressWarnings(summary(regression1_large$residuals))","suppressWarnings(summary(regression1_small$residuals))","suppressWarnings(summary(regression2_large$residuals))","suppressWarnings(summary(regression2_small$residuals))"],"status":["outdated","imported","outdated","outdated","outdated","outdated","outdated","imported","imported","imported","outdated","outdated","outdated","outdated","outdated","imported","outdated","outdated","outdated","outdated","outdated"],"type":["file","file","object","object","object","object","object","function","function","function","object","object","object","object","object","function","object","object","object","object","object"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#000000","#1874CD","#000000","#000000","#000000","#000000","#000000","#1874CD","#1874CD","#1874CD","#000000","#000000","#000000","#000000","#000000","#1874CD","#000000","#000000","#000000","#000000","#000000"],"shape":["square","square","dot","dot","dot","dot","dot","triangle","triangle","triangle","dot","dot","dot","dot","dot","triangle","dot","dot","dot","dot","dot"],"level":[7,1,5,5,5,5,3,1,1,1,4,4,4,4,6,2,3,5,5,5,5],"title":["knit(knitr_in(\"report.Rmd\"),&nbsp;file_out(\"report....","---<br>title: \"Final results report for the mtcars ex...<br>author: You<br>output: html_document<br>---<br><br># The weight and fuel efficiency of cars<br><br>Is there an association between the weight and...<br>...","suppressWarnings(summary(regression1_large))$c...","suppressWarnings(summary(regression1_small))$c...","suppressWarnings(summary(regression2_large))$c...","suppressWarnings(summary(regression2_small))$c...","simulate(64)","function&nbsp;(data,&nbsp;n)&nbsp;<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;data[sample.int(n&nbsp;=&nbsp;nrow(data),&nbsp;size&nbsp;=&nbsp;n,&nbsp;...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>}","function&nbsp;(d)&nbsp;<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;lm(y&nbsp;~&nbsp;+x,&nbsp;data&nbsp;=&nbsp;d)<br>}","function&nbsp;(d)&nbsp;<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;d$x3&nbsp;<-&nbsp;d$x^3<br>&nbsp;&nbsp;&nbsp;&nbsp;lm(y&nbsp;~&nbsp;x3,&nbsp;data&nbsp;=&nbsp;d)<br>}","reg1(large)","reg1(small)","reg2(large)","reg2(small)","knit(knitr_in(\"report.Rmd\"),&nbsp;file_out(\"report....","function&nbsp;(n)&nbsp;<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;<-&nbsp;random_rows(data&nbsp;=&nbsp;mtcars,&nbsp;n&nbsp;=&nbsp;n)<br>&nbsp;&nbsp;&nbsp;&nbsp;data.frame(x&nbsp;=&nbsp;data$wt,&nbsp;y&nbsp;=&nbsp;data$mpg)<br>}","simulate(48)","suppressWarnings(summary(regression1_large$res...","suppressWarnings(summary(regression1_small$res...","suppressWarnings(summary(regression2_large$res...","suppressWarnings(summary(regression2_small$res..."],"x":[-1,-0.545454545454545,-0.272727272727273,0.272727272727273,0.0909090909090908,-0.636363636363636,-0.363636363636364,-0.363636363636364,0.909090909090909,0.0909090909090908,0.727272727272727,1,-0.181818181818182,0.363636363636364,-1,-0.363636363636364,0,0.454545454545455,0.636363636363636,-0.0909090909090909,0.818181818181818],"y":[1,-1,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,-0.333333333333333,-1,-1,-1,0,0,0,0,0.666666666666667,-0.666666666666667,-0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333,0.333333333333333]},"edges":{"from":["random_rows","reg1","reg1","reg2","reg2","\"report.Rmd\"","coef_regression2_small","large","large","large","small","small","small","simulate","simulate","regression1_small","regression1_small","regression1_large","regression1_large","regression2_small","regression2_small","regression2_large","regression2_large","report"],"to":["simulate","regression1_small","regression1_large","regression2_small","regression2_large","report","report","regression1_large","regression2_large","report","regression1_small","regression2_small","report","large","small","summ_regression1_small","coef_regression1_small","summ_regression1_large","coef_regression1_large","coef_regression2_small","summ_regression2_small","summ_regression2_large","coef_regression2_large","\"report.md\""],"file":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,null],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"],"smooth":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Imported","Object","Function","File"],"color":["#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","triangle","square"],"font.color":["black","black","black","black","black"],"font.size":[20,20,20,20,20],"id":[2,5,7,8,9]},"nodesToDataframe":true},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>Let’s condense all the imports into one node and all the up-to-date targets into another. That way, the outdated targets stand out.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(</a>
<a class="sourceLine" id="cb172-2" data-line-number="2">  config,</a>
<a class="sourceLine" id="cb172-3" data-line-number="3">  <span class="dt">group =</span> <span class="st">&quot;status&quot;</span>,</a>
<a class="sourceLine" id="cb172-4" data-line-number="4">  <span class="dt">clusters =</span> <span class="kw">c</span>(<span class="st">&quot;imported&quot;</span>, <span class="st">&quot;up to date&quot;</span>)</a>
<a class="sourceLine" id="cb172-5" data-line-number="5">)</a></code></pre></div>
<div id="htmlwidget-b8cbfc49975bc1023859" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-b8cbfc49975bc1023859">{"x":{"nodes":{"id":["\"report.md\"","coef_regression1_large","coef_regression1_small","coef_regression2_large","coef_regression2_small","large","regression1_large","regression1_small","regression2_large","regression2_small","report","small","summ_regression1_large","summ_regression1_small","summ_regression2_large","summ_regression2_small","status: imported"],"deps":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],"trigger":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},null],"label":["\"report.md\"","coef_regression1_large","coef_regression1_small","coef_regression2_large","coef_regression2_small","large","regression1_large","regression1_small","regression2_large","regression2_small","report","small","summ_regression1_large","summ_regression1_small","summ_regression2_large","summ_regression2_small","status: imported"],"command":["knit(knitr_in(\"report.Rmd\"), file_out(\"report.md\"), quiet = TRUE)","suppressWarnings(summary(regression1_large))$coefficients","suppressWarnings(summary(regression1_small))$coefficients","suppressWarnings(summary(regression2_large))$coefficients","suppressWarnings(summary(regression2_small))$coefficients","simulate(64)","reg1(large)","reg1(small)","reg2(large)","reg2(small)","knit(knitr_in(\"report.Rmd\"), file_out(\"report.md\"), quiet = TRUE)","simulate(48)","suppressWarnings(summary(regression1_large$residuals))","suppressWarnings(summary(regression1_small$residuals))","suppressWarnings(summary(regression2_large$residuals))","suppressWarnings(summary(regression2_small$residuals))",null],"status":["outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","outdated","imported"],"type":["file","object","object","object","object","object","object","object","object","object","object","object","object","object","object","object","cluster"],"font.size":[20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],"color":["#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#000000","#1874CD"],"shape":["square","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","dot","diamond"],"level":[6,4,4,4,4,2,3,3,3,3,5,2,4,4,4,4,1],"title":["knit(knitr_in(\"report.Rmd\"),&nbsp;file_out(\"report....","suppressWarnings(summary(regression1_large))$c...","suppressWarnings(summary(regression1_small))$c...","suppressWarnings(summary(regression2_large))$c...","suppressWarnings(summary(regression2_small))$c...","simulate(64)","reg1(large)","reg1(small)","reg2(large)","reg2(small)","knit(knitr_in(\"report.Rmd\"),&nbsp;file_out(\"report....","simulate(48)","suppressWarnings(summary(regression1_large$res...","suppressWarnings(summary(regression1_small$res...","suppressWarnings(summary(regression2_large$res...","suppressWarnings(summary(regression2_small$res...","\"report.Rmd\", random_rows, reg1, reg2, simulate"],"x":[-0.333333333333333,0.5,0.0833333333333333,1,-0.666666666666667,0.0833333333333333,0.5,-0.25,0.916666666666667,0.333333333333333,-0.333333333333333,-0.0833333333333334,-0.0833333333333334,-1,0.833333333333333,0.333333333333333,0.25],"y":[1,0.2,0.2,0.2,0.2,-0.6,-0.2,-0.2,-0.2,-0.2,0.6,-0.6,0.2,0.2,0.2,0.2,-1]},"edges":{"from":["status: imported","status: imported","status: imported","status: imported","status: imported","coef_regression2_small","large","large","large","small","small","small","status: imported","status: imported","regression1_small","regression1_small","regression1_large","regression1_large","regression2_small","regression2_small","regression2_large","regression2_large","report"],"to":["regression1_small","regression1_large","regression2_small","regression2_large","report","report","regression1_large","regression2_large","report","regression1_small","regression2_small","report","large","small","summ_regression1_small","coef_regression1_small","summ_regression1_large","coef_regression1_large","coef_regression2_small","summ_regression2_small","summ_regression2_large","coef_regression2_large","\"report.md\""],"file":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,null],"arrows":["to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to","to"],"smooth":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Imported","Object","File","Cluster"],"color":["#000000","#1874CD","#888888","#888888","#888888"],"shape":["dot","dot","dot","square","diamond"],"font.color":["black","black","black","black","black"],"font.size":[20,20,20,20,20],"id":[2,5,7,9,10]},"nodesToDataframe":true},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="output-files" class="section level2">
<h2><span class="header-section-number">8.6</span> Output files</h2>
<p><code>drake</code> can reproducibly track multiple output files per target and show them in the graph.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb173-1" data-line-number="1">plan &lt;-<span class="st"> </span><span class="kw">drake_plan</span>(</a>
<a class="sourceLine" id="cb173-2" data-line-number="2">  <span class="dt">target1 =</span> {</a>
<a class="sourceLine" id="cb173-3" data-line-number="3">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;in1.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out1.txt&quot;</span>))</a>
<a class="sourceLine" id="cb173-4" data-line-number="4">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;in2.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out2.txt&quot;</span>))</a>
<a class="sourceLine" id="cb173-5" data-line-number="5">  },</a>
<a class="sourceLine" id="cb173-6" data-line-number="6">  <span class="dt">target2 =</span> {</a>
<a class="sourceLine" id="cb173-7" data-line-number="7">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;out1.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out3.txt&quot;</span>))</a>
<a class="sourceLine" id="cb173-8" data-line-number="8">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;out2.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out4.txt&quot;</span>))</a>
<a class="sourceLine" id="cb173-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb173-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb173-11" data-line-number="11"><span class="kw">writeLines</span>(<span class="st">&quot;in1&quot;</span>, <span class="st">&quot;in1.txt&quot;</span>)</a>
<a class="sourceLine" id="cb173-12" data-line-number="12"><span class="kw">writeLines</span>(<span class="st">&quot;in2&quot;</span>, <span class="st">&quot;in2.txt&quot;</span>)</a>
<a class="sourceLine" id="cb173-13" data-line-number="13">config &lt;-<span class="st"> </span><span class="kw">make</span>(plan)</a>
<a class="sourceLine" id="cb173-14" data-line-number="14">## target target1</a>
<a class="sourceLine" id="cb173-15" data-line-number="15">## target target2</a>
<a class="sourceLine" id="cb173-16" data-line-number="16"><span class="kw">writeLines</span>(<span class="st">&quot;abcdefg&quot;</span>, <span class="st">&quot;out3.txt&quot;</span>)</a>
<a class="sourceLine" id="cb173-17" data-line-number="17"><span class="kw">vis_drake_graph</span>(config, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div id="htmlwidget-a6cb668f63b9422927f9" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-a6cb668f63b9422927f9">{"x":{"nodes":{"id":["\"out1.txt\"","\"out2.txt\"","\"out3.txt\"","\"out4.txt\"","target1","target2"],"deps":[{},{},{},{},{},{}],"trigger":[{},{},{},{},{},{}],"label":["\"out1.txt\"","\"out2.txt\"","\"out3.txt\"","\"out4.txt\"","target1\n0.026s","target2\n0.028s"],"command":["{\n    file.copy(file_in(\"in1.txt\"), file_out(\"out1.txt\"))\n    file.copy(file_in(\"in2.txt\"), file_out(\"out2.txt\"))\n}","{\n    file.copy(file_in(\"in1.txt\"), file_out(\"out1.txt\"))\n    file.copy(file_in(\"in2.txt\"), file_out(\"out2.txt\"))\n}","{\n    file.copy(file_in(\"out1.txt\"), file_out(\"out3.txt\"))\n    file.copy(file_in(\"out2.txt\"), file_out(\"out4.txt\"))\n}","{\n    file.copy(file_in(\"out1.txt\"), file_out(\"out3.txt\"))\n    file.copy(file_in(\"out2.txt\"), file_out(\"out4.txt\"))\n}","{\n    file.copy(file_in(\"in1.txt\"), file_out(\"out1.txt\"))\n    file.copy(file_in(\"in2.txt\"), file_out(\"out2.txt\"))\n}","{\n    file.copy(file_in(\"out1.txt\"), file_out(\"out3.txt\"))\n    file.copy(file_in(\"out2.txt\"), file_out(\"out4.txt\"))\n}"],"status":["up to date","up to date","outdated","outdated","up to date","outdated"],"type":["file","file","file","file","object","object"],"font.size":[20,20,20,20,20,20],"color":["#228B22","#228B22","#000000","#000000","#228B22","#000000"],"shape":["square","square","square","square","dot","dot"],"level":[2,2,4,4,1,3],"title":["{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"in1.txt\"),&nbsp;file_out(\"...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"in1.txt\"),&nbsp;file_out(\"...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"out1.txt\"),&nbsp;file_out(...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"out1.txt\"),&nbsp;file_out(...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"in1.txt\"),&nbsp;file_out(\"...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"out1.txt\"),&nbsp;file_out(..."],"x":[-1,1,-1,1,0,0],"y":[-0.333333333333333,-0.333333333333333,1,1,-1,0.333333333333333]},"edges":{"from":["\"out1.txt\"","\"out2.txt\"","target1","target1","target2","target2"],"to":["target2","target2","\"out1.txt\"","\"out2.txt\"","\"out3.txt\"","\"out4.txt\""],"file":[null,null,null,null,null,null],"arrows":["to","to","to","to","to","to"],"smooth":[true,true,true,true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Object","File"],"color":["#228B22","#000000","#888888","#888888"],"shape":["dot","dot","dot","square"],"font.color":["black","black","black","black"],"font.size":[20,20,20,20],"id":[1,2,7,9]},"nodesToDataframe":true},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>If your graph is too busy, you can hide the output files with <code>show_output_files = FALSE</code>. <code>drake</code> preserves dependency relationships induced by files, so there is now an edge from <code>target1</code> to <code>target2</code>.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1"><span class="kw">vis_drake_graph</span>(config, <span class="dt">show_output_files =</span> <span class="ot">FALSE</span>, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div id="htmlwidget-e9e9c9410504e2114dc2" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-e9e9c9410504e2114dc2">{"x":{"nodes":{"id":["target1","target2"],"deps":[{},{}],"trigger":[{},{}],"label":["target1\n0.026s","target2\n0.028s"],"command":["{\n    file.copy(file_in(\"in1.txt\"), file_out(\"out1.txt\"))\n    file.copy(file_in(\"in2.txt\"), file_out(\"out2.txt\"))\n}","{\n    file.copy(file_in(\"out1.txt\"), file_out(\"out3.txt\"))\n    file.copy(file_in(\"out2.txt\"), file_out(\"out4.txt\"))\n}"],"status":["up to date","outdated"],"type":["object","object"],"font.size":[20,20],"color":["#228B22","#000000"],"shape":["dot","dot"],"level":[1,2],"title":["{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"in1.txt\"),&nbsp;file_out(\"...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"out1.txt\"),&nbsp;file_out(..."],"x":[null,null],"y":[-1,1]},"edges":{"from":["target1"],"to":["target2"],"file":[1],"arrows":["to"],"smooth":[true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Up to date","Outdated","Object"],"color":["#228B22","#000000","#888888"],"shape":["dot","dot","dot"],"font.color":["black","black","black"],"font.size":[20,20,20],"id":[1,2,7]},"nodesToDataframe":true},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>
<p>If <code>target2</code> depends on the <em>value</em> of <code>target1</code> in addition to its output files, the graph adds another edge.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" data-line-number="1">plan &lt;-<span class="st"> </span><span class="kw">drake_plan</span>(</a>
<a class="sourceLine" id="cb175-2" data-line-number="2">  <span class="dt">target1 =</span> {</a>
<a class="sourceLine" id="cb175-3" data-line-number="3">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;in1.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out1.txt&quot;</span>))</a>
<a class="sourceLine" id="cb175-4" data-line-number="4">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;in2.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out2.txt&quot;</span>))</a>
<a class="sourceLine" id="cb175-5" data-line-number="5">    <span class="kw">rnorm</span>(<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb175-6" data-line-number="6">  },</a>
<a class="sourceLine" id="cb175-7" data-line-number="7">  <span class="dt">target2 =</span> {</a>
<a class="sourceLine" id="cb175-8" data-line-number="8">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;out1.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out3.txt&quot;</span>))</a>
<a class="sourceLine" id="cb175-9" data-line-number="9">    <span class="kw">file.copy</span>(<span class="kw">file_in</span>(<span class="st">&quot;out2.txt&quot;</span>), <span class="kw">file_out</span>(<span class="st">&quot;out4.txt&quot;</span>))</a>
<a class="sourceLine" id="cb175-10" data-line-number="10">    target1 <span class="op">+</span><span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb175-11" data-line-number="11">  }</a>
<a class="sourceLine" id="cb175-12" data-line-number="12">)</a>
<a class="sourceLine" id="cb175-13" data-line-number="13">config &lt;-<span class="st"> </span><span class="kw">drake_config</span>(plan)</a>
<a class="sourceLine" id="cb175-14" data-line-number="14"><span class="kw">vis_drake_graph</span>(config, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<div id="htmlwidget-34e0a0dbce6c2cc83b06" style="width:576px;height:576px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-34e0a0dbce6c2cc83b06">{"x":{"nodes":{"id":["\"out1.txt\"","\"out2.txt\"","\"out3.txt\"","\"out4.txt\"","target1","target2"],"deps":[{},{},{},{},{},{}],"trigger":[{},{},{},{},{},{}],"label":["\"out1.txt\"","\"out2.txt\"","\"out3.txt\"","\"out4.txt\"","target1\n0.026s","target2\n0.028s"],"command":["{\n    file.copy(file_in(\"in1.txt\"), file_out(\"out1.txt\"))\n    file.copy(file_in(\"in2.txt\"), file_out(\"out2.txt\"))\n    rnorm(5)\n}","{\n    file.copy(file_in(\"in1.txt\"), file_out(\"out1.txt\"))\n    file.copy(file_in(\"in2.txt\"), file_out(\"out2.txt\"))\n    rnorm(5)\n}","{\n    file.copy(file_in(\"out1.txt\"), file_out(\"out3.txt\"))\n    file.copy(file_in(\"out2.txt\"), file_out(\"out4.txt\"))\n    target1 + 5\n}","{\n    file.copy(file_in(\"out1.txt\"), file_out(\"out3.txt\"))\n    file.copy(file_in(\"out2.txt\"), file_out(\"out4.txt\"))\n    target1 + 5\n}","{\n    file.copy(file_in(\"in1.txt\"), file_out(\"out1.txt\"))\n    file.copy(file_in(\"in2.txt\"), file_out(\"out2.txt\"))\n    rnorm(5)\n}","{\n    file.copy(file_in(\"out1.txt\"), file_out(\"out3.txt\"))\n    file.copy(file_in(\"out2.txt\"), file_out(\"out4.txt\"))\n    target1 + 5\n}"],"status":["outdated","outdated","outdated","outdated","outdated","outdated"],"type":["file","file","file","file","object","object"],"font.size":[20,20,20,20,20,20],"color":["#000000","#000000","#000000","#000000","#000000","#000000"],"shape":["square","square","square","square","dot","dot"],"level":[2,2,4,4,1,3],"title":["{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"in1.txt\"),&nbsp;file_out(\"...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"in1.txt\"),&nbsp;file_out(\"...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"out1.txt\"),&nbsp;file_out(...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"out1.txt\"),&nbsp;file_out(...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"in1.txt\"),&nbsp;file_out(\"...","{\n&nbsp;&nbsp;&nbsp;&nbsp;file.copy(file_in(\"out1.txt\"),&nbsp;file_out(..."],"x":[-1,0.333333333333333,-0.333333333333333,1,0.333333333333333,0.333333333333333],"y":[-0.333333333333333,-0.333333333333333,1,1,-1,0.333333333333333]},"edges":{"from":["target1","\"out1.txt\"","\"out2.txt\"","target1","target1","target2","target2"],"to":["target2","target2","target2","\"out1.txt\"","\"out2.txt\"","\"out3.txt\"","\"out4.txt\""],"file":[0,null,null,null,null,null,null],"arrows":["to","to","to","to","to","to","to"],"smooth":[true,true,true,true,true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"layout":{"hierarchical":{"enabled":true,"direction":"LR"}},"edges":{"smooth":false},"physics":{"stabilization":false},"interaction":{"navigationButtons":true}},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":{"text":"Dependency graph","style":"font-family:Georgia, Times New Roman, Times, serif;font-weight:bold;font-size:20px;text-align:center;"},"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":true,"fit":false,"resetHighlight":true,"clusterOptions":null},"legend":{"width":0.2,"useGroups":false,"position":"left","ncol":1,"stepX":100,"stepY":100,"zoom":true,"nodes":{"label":["Outdated","Object","File"],"color":["#000000","#888888","#888888"],"shape":["dot","dot","square"],"font.color":["black","black","black"],"font.size":[20,20,20],"id":[2,7,9]},"nodesToDataframe":true},"igraphlayout":{"type":"square"},"tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);"},"evals":[],"jsHooks":[]}</script>

</div>
</div>
<div style = "background: #1C356D; color: white; padding: 10px 10px 10px 25px; font-size: 1em; width: 100%;">
  Copyright Eli Lilly and Company
</div>
            </section>

          </div>
        </div>
      </div>
<a href="organize.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="debug.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
