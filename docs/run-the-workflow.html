<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>The-User-Manual-of the drake R Package</title>
  <meta name="description" content="The-User-Manual-of the drake R Package">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="The-User-Manual-of the drake R Package" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="The-User-Manual-of the drake R Package" />
  
  
  

<meta name="author" content="Will Landau">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="flexible-workflow-plan-generation.html">
<link rel="next" href="automatic-watching-for-changed-dependencies.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> The drake R package</a></li>
<li class="chapter" data-level="2" data-path="set-the-stage-.html"><a href="set-the-stage-.html"><i class="fa fa-check"></i><b>2</b> Set the stage.</a></li>
<li class="chapter" data-level="3" data-path="make-your-results-.html"><a href="make-your-results-.html"><i class="fa fa-check"></i><b>3</b> Make your results.</a></li>
<li class="chapter" data-level="4" data-path="go-back-and-fix-things-.html"><a href="go-back-and-fix-things-.html"><i class="fa fa-check"></i><b>4</b> Go back and fix things.</a></li>
<li class="chapter" data-level="5" data-path="try-it-yourself.html"><a href="try-it-yourself.html"><i class="fa fa-check"></i><b>5</b> Try it yourself!</a></li>
<li class="chapter" data-level="6" data-path="example-packages.html"><a href="example-packages.html"><i class="fa fa-check"></i><b>6</b> Example: R package download trends</a></li>
<li class="chapter" data-level="7" data-path="get-the-code-.html"><a href="get-the-code-.html"><i class="fa fa-check"></i><b>7</b> Get the code.</a></li>
<li class="chapter" data-level="8" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>8</b> Overview</a></li>
<li class="chapter" data-level="9" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>9</b> Analysis</a></li>
<li class="chapter" data-level="10" data-path="what-remote-data-sources-in-general.html"><a href="what-remote-data-sources-in-general.html"><i class="fa fa-check"></i><b>10</b> What remote data sources in general?</a></li>
<li class="chapter" data-level="11" data-path="example-gsp.html"><a href="example-gsp.html"><i class="fa fa-check"></i><b>11</b> Example: gross state products</a></li>
<li class="chapter" data-level="12" data-path="get-the-code-1.html"><a href="get-the-code-1.html"><i class="fa fa-check"></i><b>12</b> Get the code.</a></li>
<li class="chapter" data-level="13" data-path="objective-and-methods.html"><a href="objective-and-methods.html"><i class="fa fa-check"></i><b>13</b> Objective and methods</a></li>
<li class="chapter" data-level="14" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>14</b> Data</a></li>
<li class="chapter" data-level="15" data-path="analysis-1.html"><a href="analysis-1.html"><i class="fa fa-check"></i><b>15</b> Analysis</a></li>
<li class="chapter" data-level="16" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>16</b> Results</a></li>
<li class="chapter" data-level="17" data-path="comparison-with-gnu-make.html"><a href="comparison-with-gnu-make.html"><i class="fa fa-check"></i><b>17</b> Comparison with GNU Make</a></li>
<li class="chapter" data-level="18" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>18</b> References</a></li>
<li class="chapter" data-level="19" data-path="mtcars.html"><a href="mtcars.html"><i class="fa fa-check"></i><b>19</b> The mtcars example and workflow plan generation</a></li>
<li class="chapter" data-level="20" data-path="get-the-code-2.html"><a href="get-the-code-2.html"><i class="fa fa-check"></i><b>20</b> Get the code.</a></li>
<li class="chapter" data-level="21" data-path="quick-examples.html"><a href="quick-examples.html"><i class="fa fa-check"></i><b>21</b> Quick examples</a></li>
<li class="chapter" data-level="22" data-path="the-motivation-of-the-mtcars-example.html"><a href="the-motivation-of-the-mtcars-example.html"><i class="fa fa-check"></i><b>22</b> The motivation of the mtcars example</a></li>
<li class="chapter" data-level="23" data-path="set-up-the-mtcars-example.html"><a href="set-up-the-mtcars-example.html"><i class="fa fa-check"></i><b>23</b> Set up the mtcars example</a></li>
<li class="chapter" data-level="24" data-path="the-workflow-plan-data-frame.html"><a href="the-workflow-plan-data-frame.html"><i class="fa fa-check"></i><b>24</b> The workflow plan data frame</a></li>
<li class="chapter" data-level="25" data-path="generate-the-workflow-plan.html"><a href="generate-the-workflow-plan.html"><i class="fa fa-check"></i><b>25</b> Generate the workflow plan</a></li>
<li class="chapter" data-level="26" data-path="flexible-workflow-plan-generation.html"><a href="flexible-workflow-plan-generation.html"><i class="fa fa-check"></i><b>26</b> Flexible workflow plan generation</a></li>
<li class="chapter" data-level="27" data-path="run-the-workflow.html"><a href="run-the-workflow.html"><i class="fa fa-check"></i><b>27</b> Run the workflow</a></li>
<li class="chapter" data-level="28" data-path="automatic-watching-for-changed-dependencies.html"><a href="automatic-watching-for-changed-dependencies.html"><i class="fa fa-check"></i><b>28</b> Automatic watching for changed dependencies</a></li>
<li class="chapter" data-level="29" data-path="a-note-on-tidy-evaluation.html"><a href="a-note-on-tidy-evaluation.html"><i class="fa fa-check"></i><b>29</b> A note on tidy evaluation</a></li>
<li class="chapter" data-level="30" data-path="need-more-speed.html"><a href="need-more-speed.html"><i class="fa fa-check"></i><b>30</b> Need more speed?</a></li>
<li class="chapter" data-level="31" data-path="best-practices.html"><a href="best-practices.html"><i class="fa fa-check"></i><b>31</b> General best practices for drake projects</a></li>
<li class="chapter" data-level="32" data-path="how-to-organize-your-files.html"><a href="how-to-organize-your-files.html"><i class="fa fa-check"></i><b>32</b> How to organize your files</a><ul>
<li class="chapter" data-level="32.1" data-path="how-to-organize-your-files.html"><a href="how-to-organize-your-files.html#examples"><i class="fa fa-check"></i><b>32.1</b> Examples</a></li>
<li class="chapter" data-level="32.2" data-path="how-to-organize-your-files.html"><a href="how-to-organize-your-files.html#where-do-you-put-your-code"><i class="fa fa-check"></i><b>32.2</b> Where do you put your code?</a></li>
<li class="chapter" data-level="32.3" data-path="how-to-organize-your-files.html"><a href="how-to-organize-your-files.html#remember-your-commands-are-code-chunks-not-r-scripts"><i class="fa fa-check"></i><b>32.3</b> Remember: your commands are code chunks, not R scripts</a></li>
<li class="chapter" data-level="32.4" data-path="how-to-organize-your-files.html"><a href="how-to-organize-your-files.html#file-output-targets"><i class="fa fa-check"></i><b>32.4</b> File output targets</a></li>
<li class="chapter" data-level="32.5" data-path="how-to-organize-your-files.html"><a href="how-to-organize-your-files.html#r-markdown-and-knitr-reports"><i class="fa fa-check"></i><b>32.5</b> R Markdown and knitr reports</a></li>
<li class="chapter" data-level="32.6" data-path="how-to-organize-your-files.html"><a href="how-to-organize-your-files.html#workflows-as-r-packages"><i class="fa fa-check"></i><b>32.6</b> Workflows as R packages</a><ul>
<li class="chapter" data-level="32.6.1" data-path="how-to-organize-your-files.html"><a href="how-to-organize-your-files.html#advantages-of-putting-workflows-in-r-packages"><i class="fa fa-check"></i><b>32.6.1</b> Advantages of putting workflows in R packages</a></li>
<li class="chapter" data-level="32.6.2" data-path="how-to-organize-your-files.html"><a href="how-to-organize-your-files.html#the-problem"><i class="fa fa-check"></i><b>32.6.2</b> The problem</a></li>
<li class="chapter" data-level="32.6.3" data-path="how-to-organize-your-files.html"><a href="how-to-organize-your-files.html#the-solution"><i class="fa fa-check"></i><b>32.6.3</b> The solution</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="33" data-path="generating-workflow-plan-data-frames.html"><a href="generating-workflow-plan-data-frames.html"><i class="fa fa-check"></i><b>33</b> Generating workflow plan data frames</a></li>
<li class="chapter" data-level="34" data-path="remote-data-sources.html"><a href="remote-data-sources.html"><i class="fa fa-check"></i><b>34</b> Remote data sources</a></li>
<li class="chapter" data-level="35" data-path="debug.html"><a href="debug.html"><i class="fa fa-check"></i><b>35</b> Debugging and testing drake projects</a></li>
<li class="chapter" data-level="36" data-path="the-configuration-list.html"><a href="the-configuration-list.html"><i class="fa fa-check"></i><b>36</b> The configuration list</a></li>
<li class="chapter" data-level="37" data-path="plan-your-work-.html"><a href="plan-your-work-.html"><i class="fa fa-check"></i><b>37</b> Plan your work.</a><ul>
<li class="chapter" data-level="37.1" data-path="plan-your-work-.html"><a href="plan-your-work-.html#workflow-plan-data-frames"><i class="fa fa-check"></i><b>37.1</b> Workflow plan data frames</a></li>
<li class="chapter" data-level="37.2" data-path="plan-your-work-.html"><a href="plan-your-work-.html#visualize-your-workflow."><i class="fa fa-check"></i><b>37.2</b> Visualize your workflow.</a></li>
<li class="chapter" data-level="37.3" data-path="plan-your-work-.html"><a href="plan-your-work-.html#check-dependency-relationships."><i class="fa fa-check"></i><b>37.3</b> Check dependency relationships.</a></li>
<li class="chapter" data-level="37.4" data-path="plan-your-work-.html"><a href="plan-your-work-.html#outdated-up-to-date-and-missing-items"><i class="fa fa-check"></i><b>37.4</b> Outdated, up to date, and missing items</a></li>
</ul></li>
<li class="chapter" data-level="38" data-path="test-with-triggers-.html"><a href="test-with-triggers-.html"><i class="fa fa-check"></i><b>38</b> Test with triggers.</a></li>
<li class="chapter" data-level="39" data-path="skipping-imports.html"><a href="skipping-imports.html"><i class="fa fa-check"></i><b>39</b> Skipping imports</a></li>
<li class="chapter" data-level="40" data-path="impose-timeouts-and-retries.html"><a href="impose-timeouts-and-retries.html"><i class="fa fa-check"></i><b>40</b> Impose timeouts and retries</a></li>
<li class="chapter" data-level="41" data-path="diagnose-failures-.html"><a href="diagnose-failures-.html"><i class="fa fa-check"></i><b>41</b> Diagnose failures.</a><ul>
<li class="chapter" data-level="41.1" data-path="diagnose-failures-.html"><a href="diagnose-failures-.html#tidy-evaluation-a-caveat-to-diagnosing-interactively"><i class="fa fa-check"></i><b>41.1</b> Tidy evaluation: a caveat to diagnosing interactively</a></li>
</ul></li>
<li class="chapter" data-level="42" data-path="debrief-a-build-session-.html"><a href="debrief-a-build-session-.html"><i class="fa fa-check"></i><b>42</b> Debrief a build session.</a></li>
<li class="chapter" data-level="43" data-path="start-tinkering-.html"><a href="start-tinkering-.html"><i class="fa fa-check"></i><b>43</b> Start tinkering.</a></li>
<li class="chapter" data-level="44" data-path="vis.html"><a href="vis.html"><i class="fa fa-check"></i><b>44</b> Visualization with drake</a></li>
<li class="chapter" data-level="45" data-path="dependency-reactivity.html"><a href="dependency-reactivity.html"><i class="fa fa-check"></i><b>45</b> Dependency reactivity</a></li>
<li class="chapter" data-level="46" data-path="subgraphs.html"><a href="subgraphs.html"><i class="fa fa-check"></i><b>46</b> Subgraphs</a></li>
<li class="chapter" data-level="47" data-path="parallel-computing-visualized.html"><a href="parallel-computing-visualized.html"><i class="fa fa-check"></i><b>47</b> Parallel computing visualized</a></li>
<li class="chapter" data-level="48" data-path="control-the-legend-.html"><a href="control-the-legend-.html"><i class="fa fa-check"></i><b>48</b> Control the legend.</a></li>
<li class="chapter" data-level="49" data-path="more-flexibility.html"><a href="more-flexibility.html"><i class="fa fa-check"></i><b>49</b> More flexibility</a></li>
<li class="chapter" data-level="50" data-path="hpc.html"><a href="hpc.html"><i class="fa fa-check"></i><b>50</b> High-performance computing with drake</a></li>
<li class="chapter" data-level="51" data-path="batch-mode-for-long-workflows.html"><a href="batch-mode-for-long-workflows.html"><i class="fa fa-check"></i><b>51</b> Batch mode for long workflows</a></li>
<li class="chapter" data-level="52" data-path="let-drake-schedule-your-targets-.html"><a href="let-drake-schedule-your-targets-.html"><i class="fa fa-check"></i><b>52</b> Let drake schedule your targets.</a></li>
<li class="chapter" data-level="53" data-path="parallel-backends.html"><a href="parallel-backends.html"><i class="fa fa-check"></i><b>53</b> Parallel backends</a></li>
<li class="chapter" data-level="54" data-path="local-workers.html"><a href="local-workers.html"><i class="fa fa-check"></i><b>54</b> Local workers</a></li>
<li class="chapter" data-level="55" data-path="remote-workers.html"><a href="remote-workers.html"><i class="fa fa-check"></i><b>55</b> Remote workers</a><ul>
<li class="chapter" data-level="55.1" data-path="remote-workers.html"><a href="remote-workers.html#future-and-future_lapply"><i class="fa fa-check"></i><b>55.1</b> <code>&quot;future&quot;</code> and <code>&quot;future_lapply&quot;</code></a></li>
<li class="chapter" data-level="55.2" data-path="remote-workers.html"><a href="remote-workers.html#makefile"><i class="fa fa-check"></i><b>55.2</b> <code>&quot;Makefile&quot;</code></a></li>
</ul></li>
<li class="chapter" data-level="56" data-path="scheduling-algorithms.html"><a href="scheduling-algorithms.html"><i class="fa fa-check"></i><b>56</b> Scheduling algorithms</a><ul>
<li class="chapter" data-level="56.1" data-path="scheduling-algorithms.html"><a href="scheduling-algorithms.html#persistent-scheduling"><i class="fa fa-check"></i><b>56.1</b> Persistent scheduling</a></li>
<li class="chapter" data-level="56.2" data-path="scheduling-algorithms.html"><a href="scheduling-algorithms.html#transient-scheduling"><i class="fa fa-check"></i><b>56.2</b> Transient scheduling</a></li>
<li class="chapter" data-level="56.3" data-path="scheduling-algorithms.html"><a href="scheduling-algorithms.html#staged-scheduling"><i class="fa fa-check"></i><b>56.3</b> Staged scheduling</a></li>
</ul></li>
<li class="chapter" data-level="57" data-path="final-thoughts.html"><a href="final-thoughts.html"><i class="fa fa-check"></i><b>57</b> Final thoughts</a><ul>
<li class="chapter" data-level="57.1" data-path="final-thoughts.html"><a href="final-thoughts.html#debugging"><i class="fa fa-check"></i><b>57.1</b> Debugging</a></li>
<li class="chapter" data-level="57.2" data-path="final-thoughts.html"><a href="final-thoughts.html#drake-as-an-ordinary-job-scheduler"><i class="fa fa-check"></i><b>57.2</b> Drake as an ordinary job scheduler</a></li>
<li class="chapter" data-level="57.3" data-path="final-thoughts.html"><a href="final-thoughts.html#more-resources"><i class="fa fa-check"></i><b>57.3</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="58" data-path="footnotes.html"><a href="footnotes.html"><i class="fa fa-check"></i><b>58</b> Footnotes</a></li>
<li class="chapter" data-level="59" data-path="time.html"><a href="time.html"><i class="fa fa-check"></i><b>59</b> Time: logging, prediction, and strategy</a></li>
<li class="chapter" data-level="60" data-path="predict-total-runtime.html"><a href="predict-total-runtime.html"><i class="fa fa-check"></i><b>60</b> Predict total runtime</a></li>
<li class="chapter" data-level="61" data-path="strategize-your-high-performance-computing.html"><a href="strategize-your-high-performance-computing.html"><i class="fa fa-check"></i><b>61</b> Strategize your high-performance computing</a></li>
<li class="chapter" data-level="62" data-path="store.html"><a href="store.html"><i class="fa fa-check"></i><b>62</b> Storage</a></li>
<li class="chapter" data-level="63" data-path="caches.html"><a href="caches.html"><i class="fa fa-check"></i><b>63</b> Caches</a></li>
<li class="chapter" data-level="64" data-path="hash-algorithms.html"><a href="hash-algorithms.html"><i class="fa fa-check"></i><b>64</b> Hash algorithms</a></li>
<li class="chapter" data-level="65" data-path="which-hash-algorithm-should-you-choose.html"><a href="which-hash-algorithm-should-you-choose.html"><i class="fa fa-check"></i><b>65</b> Which hash algorithm should you choose?</a></li>
<li class="chapter" data-level="66" data-path="select-the-hash-algorithms-of-the-cache.html"><a href="select-the-hash-algorithms-of-the-cache.html"><i class="fa fa-check"></i><b>66</b> Select the hash algorithms of the cache</a></li>
<li class="chapter" data-level="67" data-path="using-storr-directly.html"><a href="using-storr-directly.html"><i class="fa fa-check"></i><b>67</b> Using <code>storr</code> directly</a></li>
<li class="chapter" data-level="68" data-path="cleaning-up.html"><a href="cleaning-up.html"><i class="fa fa-check"></i><b>68</b> Cleaning up</a></li>
<li class="chapter" data-level="69" data-path="caution.html"><a href="caution.html"><i class="fa fa-check"></i><b>69</b> Cautionary notes</a></li>
<li class="chapter" data-level="70" data-path="projects-built-with-drake-4-4-0-are-not-back-compatible-with-drake-4-4-0-.html"><a href="projects-built-with-drake-4-4-0-are-not-back-compatible-with-drake-4-4-0-.html"><i class="fa fa-check"></i><b>70</b> Projects built with drake &lt;= 4.4.0 are not back compatible with drake &gt; 4.4.0.</a></li>
<li class="chapter" data-level="71" data-path="workflow-plans.html"><a href="workflow-plans.html"><i class="fa fa-check"></i><b>71</b> Workflow plans</a><ul>
<li class="chapter" data-level="71.1" data-path="workflow-plans.html"><a href="workflow-plans.html#externalizing-commands-in-r-script-files"><i class="fa fa-check"></i><b>71.1</b> Externalizing commands in R script files</a></li>
<li class="chapter" data-level="71.2" data-path="workflow-plans.html"><a href="workflow-plans.html#commands-are-not-perfectly-flexible."><i class="fa fa-check"></i><b>71.2</b> Commands are NOT perfectly flexible.</a></li>
</ul></li>
<li class="chapter" data-level="72" data-path="execution.html"><a href="execution.html"><i class="fa fa-check"></i><b>72</b> Execution</a><ul>
<li class="chapter" data-level="72.1" data-path="execution.html"><a href="execution.html#install-drake-properly."><i class="fa fa-check"></i><b>72.1</b> Install <code>drake</code> properly.</a></li>
<li class="chapter" data-level="72.2" data-path="execution.html"><a href="execution.html#install-all-your-packages."><i class="fa fa-check"></i><b>72.2</b> Install all your packages.</a></li>
<li class="chapter" data-level="72.3" data-path="execution.html"><a href="execution.html#a-note-on-tidy-evaluation-1"><i class="fa fa-check"></i><b>72.3</b> A note on tidy evaluation</a></li>
<li class="chapter" data-level="72.4" data-path="execution.html"><a href="execution.html#find-and-diagnose-your-errors."><i class="fa fa-check"></i><b>72.4</b> Find and diagnose your errors.</a></li>
<li class="chapter" data-level="72.5" data-path="execution.html"><a href="execution.html#refresh-the-drake_config-list-early-and-often."><i class="fa fa-check"></i><b>72.5</b> Refresh the <code>drake_config()</code> list early and often.</a></li>
<li class="chapter" data-level="72.6" data-path="execution.html"><a href="execution.html#workflows-as-r-packages."><i class="fa fa-check"></i><b>72.6</b> Workflows as R packages.</a></li>
<li class="chapter" data-level="72.7" data-path="execution.html"><a href="execution.html#the-lazy_load-flag-does-not-work-with-parlapply-parallelism."><i class="fa fa-check"></i><b>72.7</b> The <code>lazy_load</code> flag does not work with <code>&quot;parLapply&quot;</code> parallelism.</a></li>
<li class="chapter" data-level="72.8" data-path="execution.html"><a href="execution.html#timeouts-may-be-unreliable."><i class="fa fa-check"></i><b>72.8</b> Timeouts may be unreliable.</a></li>
</ul></li>
<li class="chapter" data-level="73" data-path="dependencies.html"><a href="dependencies.html"><i class="fa fa-check"></i><b>73</b> Dependencies</a><ul>
<li class="chapter" data-level="73.1" data-path="dependencies.html"><a href="dependencies.html#dependency-objects-containing-functions-may-change-unexpectedly"><i class="fa fa-check"></i><b>73.1</b> Dependency objects containing functions may change unexpectedly</a></li>
<li class="chapter" data-level="73.2" data-path="dependencies.html"><a href="dependencies.html#the-magrittr-dot-.-is-always-ignored."><i class="fa fa-check"></i><b>73.2</b> The <code>magrittr</code> dot (<code>.</code>) is always ignored.</a></li>
<li class="chapter" data-level="73.3" data-path="dependencies.html"><a href="dependencies.html#triggers-and-skipped-imports"><i class="fa fa-check"></i><b>73.3</b> Triggers and skipped imports</a></li>
<li class="chapter" data-level="73.4" data-path="dependencies.html"><a href="dependencies.html#dependencies-are-not-tracked-in-some-edge-cases."><i class="fa fa-check"></i><b>73.4</b> Dependencies are not tracked in some edge cases.</a></li>
<li class="chapter" data-level="73.5" data-path="dependencies.html"><a href="dependencies.html#dependencies-of-knitr-reports"><i class="fa fa-check"></i><b>73.5</b> Dependencies of <code>knitr</code> reports</a></li>
<li class="chapter" data-level="73.6" data-path="dependencies.html"><a href="dependencies.html#knitr-inputs-and-file-outputs-in-imported-functions."><i class="fa fa-check"></i><b>73.6</b> Knitr inputs and file outputs in imported functions.</a></li>
<li class="chapter" data-level="73.7" data-path="dependencies.html"><a href="dependencies.html#functions-produced-by-vectorize"><i class="fa fa-check"></i><b>73.7</b> Functions produced by <code>Vectorize()</code></a></li>
<li class="chapter" data-level="73.8" data-path="dependencies.html"><a href="dependencies.html#compiled-code-is-not-reproducibly-tracked."><i class="fa fa-check"></i><b>73.8</b> Compiled code is not reproducibly tracked.</a></li>
<li class="chapter" data-level="73.9" data-path="dependencies.html"><a href="dependencies.html#directories-folders-are-not-reproducibly-tracked."><i class="fa fa-check"></i><b>73.9</b> Directories (folders) are not reproducibly tracked.</a></li>
<li class="chapter" data-level="73.10" data-path="dependencies.html"><a href="dependencies.html#packages-are-not-tracked-as-dependencies."><i class="fa fa-check"></i><b>73.10</b> Packages are not tracked as dependencies.</a></li>
</ul></li>
<li class="chapter" data-level="74" data-path="high-performance-computing.html"><a href="high-performance-computing.html"><i class="fa fa-check"></i><b>74</b> High-performance computing</a><ul>
<li class="chapter" data-level="74.1" data-path="high-performance-computing.html"><a href="high-performance-computing.html#the-practical-utility-of-parallel-computing"><i class="fa fa-check"></i><b>74.1</b> The practical utility of parallel computing</a></li>
<li class="chapter" data-level="74.2" data-path="high-performance-computing.html"><a href="high-performance-computing.html#maximum-number-of-simultaneous-jobs"><i class="fa fa-check"></i><b>74.2</b> Maximum number of simultaneous jobs</a></li>
<li class="chapter" data-level="74.3" data-path="high-performance-computing.html"><a href="high-performance-computing.html#parallel-computing-on-windows"><i class="fa fa-check"></i><b>74.3</b> Parallel computing on Windows</a></li>
<li class="chapter" data-level="74.4" data-path="high-performance-computing.html"><a href="high-performance-computing.html#configuring-futurebatchtools-parallelism-for-clusters"><i class="fa fa-check"></i><b>74.4</b> Configuring <a href="https://github.com/HenrikBengtsson/future">future</a>/<a href="https://github.com/mllg/batchtools">batchtools</a> parallelism for clusters</a></li>
<li class="chapter" data-level="74.5" data-path="high-performance-computing.html"><a href="high-performance-computing.html#proper-makefiles-are-not-standalone."><i class="fa fa-check"></i><b>74.5</b> Proper Makefiles are not standalone.</a></li>
<li class="chapter" data-level="74.6" data-path="high-performance-computing.html"><a href="high-performance-computing.html#makefile-level-parallelism-for-imported-objects-and-files"><i class="fa fa-check"></i><b>74.6</b> Makefile-level parallelism for imported objects and files</a></li>
<li class="chapter" data-level="74.7" data-path="high-performance-computing.html"><a href="high-performance-computing.html#zombie-processes"><i class="fa fa-check"></i><b>74.7</b> Zombie processes</a></li>
</ul></li>
<li class="chapter" data-level="75" data-path="storage.html"><a href="storage.html"><i class="fa fa-check"></i><b>75</b> Storage</a><ul>
<li class="chapter" data-level="75.1" data-path="storage.html"><a href="storage.html#projects-hosted-on-dropbox-and-similar-platforms"><i class="fa fa-check"></i><b>75.1</b> Projects hosted on Dropbox and similar platforms</a></li>
<li class="chapter" data-level="75.2" data-path="storage.html"><a href="storage.html#cache-customization-is-limited"><i class="fa fa-check"></i><b>75.2</b> Cache customization is limited</a></li>
<li class="chapter" data-level="75.3" data-path="storage.html"><a href="storage.html#runtime-predictions"><i class="fa fa-check"></i><b>75.3</b> Runtime predictions</a></li>
</ul></li>
<li class="chapter" data-level="76" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>76</b> Frequently-asked questions</a></li>
<li class="chapter" data-level="77" data-path="results-1.html"><a href="results-1.html"><i class="fa fa-check"></i><b>77</b> Results</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The-User-Manual-of the drake R Package</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="run-the-workflow" class="section level1">
<h1><span class="header-section-number">Chapter 27</span> Run the workflow</h1>
<p>You may want to check for outdated or missing targets/imports first.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">config &lt;-<span class="st"> </span><span class="kw">drake_config</span>(my_plan, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)
<span class="kw">outdated</span>(config) <span class="co"># Targets that need to be (re)built.</span>
##  [1] &quot;coef_regression1_large&quot; &quot;coef_regression1_small&quot;
##  [3] &quot;coef_regression2_large&quot; &quot;coef_regression2_small&quot;
##  [5] &quot;large&quot;                  &quot;regression1_large&quot;     
##  [7] &quot;regression1_small&quot;      &quot;regression2_large&quot;     
##  [9] &quot;regression2_small&quot;      &quot;\&quot;report.md\&quot;&quot;         
## [11] &quot;small&quot;                  &quot;summ_regression1_large&quot;
## [13] &quot;summ_regression1_small&quot; &quot;summ_regression2_large&quot;
## [15] &quot;summ_regression2_small&quot;

<span class="kw">missed</span>(config) <span class="co"># Checks your workspace.</span>
## character(0)</code></pre></div>
<p>Then just <code>make(my_plan)</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">make</span>(my_plan)
## target large
## target small
## target regression1_large
## target regression2_large
## target regression1_small
## target regression2_small
## target summ_regression1_large
## target coef_regression1_large
## target summ_regression2_large
## target coef_regression2_large
## target summ_regression1_small
## target coef_regression1_small
## target coef_regression2_small
## target summ_regression2_small
## target file &quot;report.md&quot;</code></pre></div>
<p>For the <code>reg2()</code> model on the small dataset, the p-value on <code>x2</code> is so small that there may be an association between weight and fuel efficiency after all.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">readd</span>(coef_regression2_small)
##              Estimate Std. Error   t value     Pr(&gt;|t|)
## (Intercept) 27.504915 1.02496426 26.835000 9.676340e-30
## x2          -0.708536 0.08285938 -8.551066 4.617125e-11</code></pre></div>
<p>The non-file dependencies of your last target are already loaded in your workspace.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ls</span>()
##   [1] &quot;additions&quot;          &quot;AES&quot;                &quot;AESdecryptECB&quot;     
##   [4] &quot;AESencryptECB&quot;      &quot;AESinit&quot;            &quot;attr_sha1&quot;         
##   [7] &quot;b&quot;                  &quot;bad_plan&quot;           &quot;cache&quot;             
##  [10] &quot;combos&quot;             &quot;commands&quot;           &quot;config&quot;            
##  [13] &quot;cr&quot;                 &quot;cranlogs_plan&quot;      &quot;create_plot&quot;       
##  [16] &quot;dat&quot;                &quot;data_plan&quot;          &quot;debug_plan&quot;        
##  [19] &quot;df&quot;                 &quot;digest&quot;             &quot;digest_impl&quot;       
##  [22] &quot;dl&quot;                 &quot;error&quot;              &quot;f&quot;                 
##  [25] &quot;g&quot;                  &quot;get_logs&quot;           &quot;get_rmspe&quot;         
##  [28] &quot;good_plan&quot;          &quot;hard_plan&quot;          &quot;hmac&quot;              
##  [31] &quot;ld&quot;                 &quot;little_b&quot;           &quot;local&quot;             
##  [34] &quot;make_my_plot&quot;       &quot;make_my_table&quot;      &quot;makeRaw&quot;           
##  [37] &quot;makeRaw.character&quot;  &quot;makeRaw.default&quot;    &quot;makeRaw.digest&quot;    
##  [40] &quot;makeRaw.raw&quot;        &quot;methods&quot;            &quot;model_plan&quot;        
##  [43] &quot;modes&quot;              &quot;my_analyses&quot;        &quot;my_datasets&quot;       
##  [46] &quot;my_plan&quot;            &quot;my_variable&quot;        &quot;new_objects&quot;       
##  [49] &quot;new_simulation&quot;     &quot;num2hex&quot;            &quot;output_plan&quot;       
##  [52] &quot;output_types&quot;       &quot;package_list&quot;       &quot;padWithZeros&quot;      
##  [55] &quot;path&quot;               &quot;plan&quot;               &quot;plot_rmspe&quot;        
##  [58] &quot;predictors&quot;         &quot;print.AES&quot;          &quot;Produc&quot;            
##  [61] &quot;query&quot;              &quot;random_rows&quot;        &quot;recent&quot;            
##  [64] &quot;reg1&quot;               &quot;reg2&quot;               &quot;report&quot;            
##  [67] &quot;reportfile&quot;         &quot;report_file&quot;        &quot;report_plan&quot;       
##  [70] &quot;results&quot;            &quot;rmd&quot;                &quot;rmspe_plan&quot;        
##  [73] &quot;rmspe_results_plan&quot; &quot;rules_grid&quot;         &quot;sha1&quot;              
##  [76] &quot;sha1.anova&quot;         &quot;sha1.array&quot;         &quot;sha1.call&quot;         
##  [79] &quot;sha1.character&quot;     &quot;sha1.complex&quot;       &quot;sha1.data.frame&quot;   
##  [82] &quot;sha1.Date&quot;          &quot;sha1.default&quot;       &quot;sha1.factor&quot;       
##  [85] &quot;sha1.function&quot;      &quot;sha1.integer&quot;       &quot;sha1.list&quot;         
##  [88] &quot;sha1.logical&quot;       &quot;sha1.matrix&quot;        &quot;sha1.name&quot;         
##  [91] &quot;sha1.NULL&quot;          &quot;sha1.numeric&quot;       &quot;sha1.pairlist&quot;     
##  [94] &quot;sha1.POSIXct&quot;       &quot;sha1.POSIXlt&quot;       &quot;sha1.raw&quot;          
##  [97] &quot;simulate&quot;           &quot;spell_check_ignore&quot; &quot;suffixes&quot;          
## [100] &quot;summary_types&quot;      &quot;targets&quot;            &quot;td&quot;                
## [103] &quot;tmp&quot;                &quot;url&quot;                &quot;whole_plan&quot;        
## [106] &quot;x&quot;                  &quot;x_plan&quot;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">outdated</span>(config) <span class="co"># Everything is up to date.</span>
## character(0)

<span class="kw">build_times</span>(<span class="dt">digits =</span> <span class="dv">4</span>) <span class="co"># How long did it take to make each target?</span>
## # A tibble: 28 x 5
##    item                   type   elapsed        user           system     
##  * &lt;chr&gt;                  &lt;chr&gt;  &lt;S4: Duration&gt; &lt;S4: Duration&gt; &lt;S4: Durat&gt;
##  1 coef_regression1_large target 0.004s         0.004s         0s         
##  2 coef_regression1_small target 0.004s         0.003s         0s         
##  3 coef_regression2_large target 0.004s         0.004s         0s         
##  4 coef_regression2_small target 0.004s         0.004s         0s         
##  5 data.frame             import 0.027s         0.027s         0s         
##  6 knit                   import 0.015s         0.015s         0s         
##  7 large                  target 0.004s         0.004s         0s         
##  8 lm                     import 0.007s         0.008s         0s         
##  9 mtcars                 import 0.001s         0s             0.001s     
## 10 nrow                   import 0.006s         0.007s         0s         
## # ... with 18 more rows</code></pre></div>
<p>See also <code>predict_runtime()</code> and <code>rate_limiting_times()</code>.</p>
<p>In the new graph, the black nodes from before are now green.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Hover, click, drag, zoom, and pan.</span>
<span class="kw">vis_drake_graph</span>(config, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;500px&quot;</span>)</code></pre></div>
<iframe src="https://ropensci.github.io/drake/images/built.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>Optionally, get <a href="http://datastorm-open.github.io/visNetwork/">visNetwork</a> nodes and edges so you can make your own plot with <code>visNetwork()</code> or <code>render_drake_graph()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dataframes_graph</span>(config)</code></pre></div>
<p>Use <code>readd()</code> and <code>loadd()</code> to load targets into your workspace. (They are cached in the hidden <code>.drake/</code> folder using <a href="https://CRAN.R-project.org/package=storr">storr</a>). There are many more functions for interacting with the cache.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">readd</span>(coef_regression2_large)
##               Estimate Std. Error   t value     Pr(&gt;|t|)
## (Intercept) 26.8613175 0.82963761  32.37717 1.485222e-40
## x2          -0.6299583 0.05501956 -11.44972 6.167412e-17

<span class="kw">loadd</span>(small)

<span class="kw">head</span>(small)
##       x    y
## 1 3.730 17.3
## 2 5.250 10.4
## 3 3.730 17.3
## 4 5.345 14.7
## 5 3.190 24.4
## 6 3.440 17.8

<span class="kw">rm</span>(small)
<span class="kw">cached</span>(small, large)
## small large 
##  TRUE  TRUE

<span class="kw">cached</span>()
##  [1] &quot;coef_regression1_large&quot; &quot;coef_regression1_small&quot;
##  [3] &quot;coef_regression2_large&quot; &quot;coef_regression2_small&quot;
##  [5] &quot;data.frame&quot;             &quot;knit&quot;                  
##  [7] &quot;large&quot;                  &quot;lm&quot;                    
##  [9] &quot;mtcars&quot;                 &quot;nrow&quot;                  
## [11] &quot;random_rows&quot;            &quot;reg1&quot;                  
## [13] &quot;reg2&quot;                   &quot;regression1_large&quot;     
## [15] &quot;regression1_small&quot;      &quot;regression2_large&quot;     
## [17] &quot;regression2_small&quot;      &quot;\&quot;report.md\&quot;&quot;         
## [19] &quot;\&quot;report.Rmd\&quot;&quot;         &quot;sample.int&quot;            
## [21] &quot;simulate&quot;               &quot;small&quot;                 
## [23] &quot;summary&quot;                &quot;summ_regression1_large&quot;
## [25] &quot;summ_regression1_small&quot; &quot;summ_regression2_large&quot;
## [27] &quot;summ_regression2_small&quot; &quot;suppressWarnings&quot;

<span class="kw">built</span>()
##  [1] &quot;coef_regression1_large&quot; &quot;coef_regression1_small&quot;
##  [3] &quot;coef_regression2_large&quot; &quot;coef_regression2_small&quot;
##  [5] &quot;large&quot;                  &quot;regression1_large&quot;     
##  [7] &quot;regression1_small&quot;      &quot;regression2_large&quot;     
##  [9] &quot;regression2_small&quot;      &quot;\&quot;report.md\&quot;&quot;         
## [11] &quot;small&quot;                  &quot;summ_regression1_large&quot;
## [13] &quot;summ_regression1_small&quot; &quot;summ_regression2_large&quot;
## [15] &quot;summ_regression2_small&quot;

<span class="kw">imported</span>()
##  [1] &quot;data.frame&quot;       &quot;knit&quot;             &quot;lm&quot;              
##  [4] &quot;mtcars&quot;           &quot;nrow&quot;             &quot;random_rows&quot;     
##  [7] &quot;reg1&quot;             &quot;reg2&quot;             &quot;\&quot;report.Rmd\&quot;&quot;  
## [10] &quot;sample.int&quot;       &quot;simulate&quot;         &quot;summary&quot;         
## [13] &quot;suppressWarnings&quot;

<span class="kw">head</span>(<span class="kw">read_drake_plan</span>())
## # A tibble: 6 x 2
##   target            command                                               
##   &lt;chr&gt;             &lt;chr&gt;                                                 
## 1 &quot;\&quot;report.md\&quot;&quot;   &quot;knit(knitr_in(\&quot;report.Rmd\&quot;), file_out(\&quot;report.md\…
## 2 small             simulate(48)                                          
## 3 large             simulate(64)                                          
## 4 regression1_small reg1(small)                                           
## 5 regression1_large reg1(large)                                           
## 6 regression2_small reg2(small)

<span class="kw">head</span>(<span class="kw">progress</span>()) <span class="co"># See also in_progress()</span>
## $method
## NULL
## 
## $url
## NULL
## 
## $headers
## NULL
## 
## $fields
## NULL
## 
## $options
## $options$noprogress
## [1] FALSE
## 
## $options$progressfunction
## function (down, up) 
## {
##     if (type == &quot;down&quot;) {
##         total &lt;- down[[1]]
##         now &lt;- down[[2]]
##     }
##     else {
##         total &lt;- up[[1]]
##         now &lt;- up[[2]]
##     }
##     if (total == 0 &amp;&amp; now == 0) {
##         bar &lt;&lt;- NULL
##     }
##     else if (total == 0) {
##         cat(&quot;\rDownloading: &quot;, bytes(now, digits = 2), &quot;     &quot;, 
##             sep = &quot;&quot;, file = con)
##         utils::flush.console()
##     }
##     else {
##         if (is.null(bar)) {
##             bar &lt;&lt;- utils::txtProgressBar(max = total, style = 3, 
##                 file = con)
##         }
##         utils::setTxtProgressBar(bar, now)
##         if (now == total) 
##             close(bar)
##     }
##     TRUE
## }
## &lt;bytecode: 0xc6d4988&gt;
## &lt;environment: 0x112a5090&gt;
## 
## 
## $auth_token
## NULL

<span class="kw">progress</span>(large)
## Error in match.arg(type): object &#39;large&#39; not found

<span class="co"># drake_session() # sessionInfo() of the last make() # nolint</span></code></pre></div>
<p>The next time you run <code>make(my_plan)</code>, nothing will build because <code>drake</code> knows everything is already up to date.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">config &lt;-<span class="st"> </span><span class="kw">make</span>(my_plan) <span class="co"># Will use config later. See also drake_config().</span>
## All targets are already up to date.</code></pre></div>
<p>But if you change one of your functions, commands, or other dependencies, drake will update the affected targets. Suppose we change the quadratic term to a cubic term in <code>reg2()</code>. We might want to do this if we suspect a cubic relationship between tons and miles per gallon.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg2 &lt;-<span class="st"> </span><span class="cf">function</span>(d) {
  d<span class="op">$</span>x3 &lt;-<span class="st"> </span>d<span class="op">$</span>x <span class="op">^</span><span class="st"> </span><span class="dv">3</span>
  <span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x3, <span class="dt">data =</span> d)
}</code></pre></div>
<p>The targets that depend on <code>reg2()</code> need to be rebuilt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">outdated</span>(config)
## [1] &quot;coef_regression2_large&quot; &quot;coef_regression2_small&quot;
## [3] &quot;regression2_large&quot;      &quot;regression2_small&quot;     
## [5] &quot;\&quot;report.md\&quot;&quot;          &quot;summ_regression2_large&quot;
## [7] &quot;summ_regression2_small&quot;</code></pre></div>
<p><strong>Advanced</strong>: To find out why a target is out of date, you can load the <a href="https://github.com/richfitz/storr">storr</a> cache and compare the appropriate hash keys to the output of <code>dependency_profile()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dependency_profile</span>(<span class="dt">target =</span> <span class="st">&quot;regression2_small&quot;</span>, <span class="dt">config =</span> config)
## $cached_command
## [1] &quot;{\n reg2(small) \n}&quot;
## 
## $current_command
## [1] &quot;{\n reg2(small) \n}&quot;
## 
## $cached_file_modification_time
## NULL
## 
## $cached_dependency_hash
## [1] &quot;ffe33a15d52e57557072fb9eb57d5d7ecc1f95aaa4d61322b726121ca980df74&quot;
## 
## $current_dependency_hash
## [1] &quot;0675307b21b618a78b59a38659cef53b7de69d3bc02d8a6c4b55f4b050a1bb97&quot;
## 
## $hashes_of_dependencies
##               reg2              small 
## &quot;d47109544c89ca7a&quot; &quot;7d836504e5060e6d&quot;

config<span class="op">$</span>cache<span class="op">$</span><span class="kw">get_hash</span>(<span class="dt">key =</span> <span class="st">&quot;small&quot;</span>) <span class="co"># same</span>
## [1] &quot;7d836504e5060e6d&quot;

config<span class="op">$</span>cache<span class="op">$</span><span class="kw">get_hash</span>(<span class="dt">key =</span> <span class="st">&quot;reg2&quot;</span>) <span class="co"># different</span>
## [1] &quot;4e1020979e4eeee3&quot;</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Hover, click, drag, zoom, and pan.</span>
<span class="co"># Same as drake_graph():</span>
<span class="kw">vis_drake_graph</span>(config, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>, <span class="dt">height =</span> <span class="st">&quot;500px&quot;</span>)</code></pre></div>
<iframe src="https://ropensci.github.io/drake/images/reg2.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>The next <code>make()</code> will rebuild the targets depending on <code>reg2()</code> and leave everything else alone.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">make</span>(my_plan)
## target regression2_large
## target regression2_small
## target summ_regression2_large
## target coef_regression2_large
## target coef_regression2_small
## target summ_regression2_small
## target file &quot;report.md&quot;</code></pre></div>
<p>Trivial changes to whitespace and comments are totally ignored.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg2 &lt;-<span class="st"> </span><span class="cf">function</span>(d) {
  d<span class="op">$</span>x3 &lt;-<span class="st"> </span>d<span class="op">$</span>x <span class="op">^</span><span class="st"> </span><span class="dv">3</span>
    <span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x3, <span class="dt">data =</span> d) <span class="co"># I indented here.</span>
}
<span class="kw">outdated</span>(config) <span class="co"># Everything is up to date.</span>
## character(0)</code></pre></div>
<p>Drake cares about nested functions too: nontrivial changes to <code>random_rows()</code> will propagate to <code>simulate()</code> and all the downstream targets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">random_rows &lt;-<span class="st"> </span><span class="cf">function</span>(data, n){
  n &lt;-<span class="st"> </span>n <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
  data[<span class="kw">sample.int</span>(<span class="dt">n =</span> <span class="kw">nrow</span>(data), <span class="dt">size =</span> n, <span class="dt">replace =</span> <span class="ot">TRUE</span>), ]
}

<span class="kw">outdated</span>(config)
##  [1] &quot;coef_regression1_large&quot; &quot;coef_regression1_small&quot;
##  [3] &quot;coef_regression2_large&quot; &quot;coef_regression2_small&quot;
##  [5] &quot;large&quot;                  &quot;regression1_large&quot;     
##  [7] &quot;regression1_small&quot;      &quot;regression2_large&quot;     
##  [9] &quot;regression2_small&quot;      &quot;\&quot;report.md\&quot;&quot;         
## [11] &quot;small&quot;                  &quot;summ_regression1_large&quot;
## [13] &quot;summ_regression1_small&quot; &quot;summ_regression2_large&quot;
## [15] &quot;summ_regression2_small&quot;

<span class="kw">make</span>(my_plan)
## target large
## target small
## target regression1_large
## target regression2_large
## target regression1_small
## target regression2_small
## target summ_regression1_large
## target coef_regression1_large
## target summ_regression2_large
## target coef_regression2_large
## target summ_regression1_small
## target coef_regression1_small
## target coef_regression2_small
## target summ_regression2_small
## target file &quot;report.md&quot;</code></pre></div>
<p>Need to add new work on the fly? Just append rows to the workflow plan. If the rest of your workflow is up to date, only the new work is run.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">new_simulation &lt;-<span class="st"> </span><span class="cf">function</span>(n){
  <span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">rnorm</span>(n), <span class="dt">y =</span> <span class="kw">rnorm</span>(n))
}

additions &lt;-<span class="st"> </span><span class="kw">drake_plan</span>(
  <span class="dt">new_data =</span> <span class="kw">new_simulation</span>(<span class="dv">36</span>) <span class="op">+</span><span class="st"> </span><span class="kw">sqrt</span>(<span class="dv">10</span>))
additions
## # A tibble: 1 x 2
##   target   command                      
##   &lt;chr&gt;    &lt;chr&gt;                        
## 1 new_data new_simulation(36) + sqrt(10)

my_plan &lt;-<span class="st"> </span><span class="kw">rbind</span>(my_plan, additions)
my_plan
## # A tibble: 16 x 2
##    target                 command                                         
##    &lt;chr&gt;                  &lt;chr&gt;                                           
##  1 &quot;\&quot;report.md\&quot;&quot;        &quot;knit(knitr_in(\&quot;report.Rmd\&quot;), file_out(\&quot;repo…
##  2 small                  simulate(48)                                    
##  3 large                  simulate(64)                                    
##  4 regression1_small      reg1(small)                                     
##  5 regression1_large      reg1(large)                                     
##  6 regression2_small      reg2(small)                                     
##  7 regression2_large      reg2(large)                                     
##  8 summ_regression1_small suppressWarnings(summary(regression1_small$resi…
##  9 summ_regression1_large suppressWarnings(summary(regression1_large$resi…
## 10 summ_regression2_small suppressWarnings(summary(regression2_small$resi…
## 11 summ_regression2_large suppressWarnings(summary(regression2_large$resi…
## 12 coef_regression1_small suppressWarnings(summary(regression1_small))$co…
## 13 coef_regression1_large suppressWarnings(summary(regression1_large))$co…
## 14 coef_regression2_small suppressWarnings(summary(regression2_small))$co…
## 15 coef_regression2_large suppressWarnings(summary(regression2_large))$co…
## 16 new_data               new_simulation(36) + sqrt(10)

<span class="kw">make</span>(my_plan)
## target new_data</code></pre></div>
<p>If you ever need to erase your work, use <code>clean()</code>. The next <code>make()</code> will rebuild any cleaned targets, so be careful. You may notice that by default, the size of the cache does not go down very much. To purge old data, you could use <code>clean(garbage_collection = TRUE, purge = TRUE)</code>. To do garbage collection without removing any important targets, use <code>drake_gc()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Uncaches individual targets and imported objects.</span>
<span class="kw">clean</span>(small, reg1, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)
<span class="kw">clean</span>(<span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># Cleans all targets out of the cache.</span>
<span class="kw">drake_gc</span>(<span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># Just garbage collection.</span>
<span class="kw">clean</span>(<span class="dt">destroy =</span> <span class="ot">TRUE</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>) <span class="co"># removes the cache entirely</span></code></pre></div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="flexible-workflow-plan-generation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="automatic-watching-for-changed-dependencies.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
